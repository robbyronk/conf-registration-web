!function(window,angular,undefined){"use strict";function isValidDottedPath(path){return null!=path&&""!==path&&"hasOwnProperty"!==path&&MEMBER_NAME_REGEX.test("."+path)}function lookupDottedPath(obj,path){if(!isValidDottedPath(path))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path);for(var keys=path.split("."),i=0,ii=keys.length;ii>i&&obj!==undefined;i++){var key=keys[i];obj=null!==obj?obj[key]:undefined}return obj}function shallowClearAndCopy(src,dst){dst=dst||{},angular.forEach(dst,function(value,key){delete dst[key]});for(var key in src)!src.hasOwnProperty(key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst}var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;angular.module("ngResource",["ng"]).factory("$resource",["$http","$q",function($http,$q){function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function Route(template,defaults){this.template=template,this.defaults=defaults||{},this.urlParams={}}function resourceFactory(url,paramDefaults,actions){function extractParams(data,actionParams){var ids={};return actionParams=extend({},paramDefaults,actionParams),forEach(actionParams,function(value,key){isFunction(value)&&(value=value()),ids[key]=value&&value.charAt&&"@"==value.charAt(0)?lookupDottedPath(data,value.substr(1)):value}),ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){shallowClearAndCopy(value||{},this)}var route=new Route(url);return actions=extend({},DEFAULT_ACTIONS,actions),forEach(actions,function(action,name){var hasBody=/^(POST|PUT|PATCH)$/i.test(action.method);Resource[name]=function(a1,a2,a3,a4){var data,success,error,params={};switch(arguments.length){case 4:error=a4,success=a3;case 3:case 2:if(!isFunction(a2)){params=a1,data=a2,success=a3;break}if(isFunction(a1)){success=a1,error=a2;break}success=a2,error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var isInstanceCall=this instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||undefined;forEach(action,function(value,key){"params"!=key&&"isArray"!=key&&"interceptor"!=key&&(httpConfig[key]=copy(value))}),hasBody&&(httpConfig.data=data),route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url);var promise=$http(httpConfig).then(function(response){var data=response.data,promise=value.$promise;if(data){if(angular.isArray(data)!==!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration. Expected response to contain an {0} but got an {1}",action.isArray?"array":"object",angular.isArray(data)?"array":"object");action.isArray?(value.length=0,forEach(data,function(item){value.push(new Resource(item))})):(shallowClearAndCopy(data,value),value.$promise=promise)}return value.$resolved=!0,response.resource=value,response},function(response){return value.$resolved=!0,(error||noop)(response),$q.reject(response)});return promise=promise.then(function(response){var value=responseInterceptor(response);return(success||noop)(value,response.headers),value},responseErrorInterceptor),isInstanceCall?promise:(value.$promise=promise,value.$resolved=!1,value)},Resource.prototype["$"+name]=function(params,success,error){isFunction(params)&&(error=success,success=params,params={});var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}}),Resource.bind=function(additionalParamDefaults){return resourceFactory(url,extend({},paramDefaults,additionalParamDefaults),actions)},Resource}var DEFAULT_ACTIONS={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isFunction=angular.isFunction;return Route.prototype={setUrlParams:function(config,params,actionUrl){var val,encodedVal,self=this,url=actionUrl||self.template,urlParams=self.urlParams={};forEach(url.split(/\W/),function(param){if("hasOwnProperty"===param)throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]=!0)}),url=url.replace(/\\:/g,":"),params=params||{},forEach(self.urlParams,function(_,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam],angular.isDefined(val)&&null!==val?(encodedVal=encodeUriSegment(val),url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),function(match,p1){return encodedVal+p1})):url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){return"/"==tail.charAt(0)?tail:leadingSlashes+tail})}),url=url.replace(/\/+$/,"")||"/",url=url.replace(/\/\.(?=\w+($|\?))/,"."),config.url=url.replace(/\/\\\./,"/."),forEach(params,function(value,key){self.urlParams[key]||(config.params=config.params||{},config.params[key]=value)})}},resourceFactory}])}(window,window.angular),function(window,angular,undefined){"use strict";angular.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function($rootScope,$browser){function push(){var name,value,browserCookies,updated;for(name in lastCookies)isUndefined(cookies[name])&&$browser.cookies(name,undefined);for(name in cookies)value=cookies[name],angular.isString(value)||(value=""+value,cookies[name]=value),value!==lastCookies[name]&&($browser.cookies(name,value),updated=!0);if(updated){updated=!1,browserCookies=$browser.cookies();for(name in cookies)cookies[name]!==browserCookies[name]&&(isUndefined(browserCookies[name])?delete cookies[name]:cookies[name]=browserCookies[name],updated=!0)}}var lastBrowserCookies,cookies={},lastCookies={},runEval=!1,copy=angular.copy,isUndefined=angular.isUndefined;return $browser.addPollFn(function(){var currentCookies=$browser.cookies();lastBrowserCookies!=currentCookies&&(lastBrowserCookies=currentCookies,copy(currentCookies,lastCookies),copy(currentCookies,cookies),runEval&&$rootScope.$apply())})(),runEval=!0,$rootScope.$watch(push),cookies}]).factory("$cookieStore",["$cookies",function($cookies){return{get:function(key){var value=$cookies[key];return value?angular.fromJson(value):value},put:function(key,value){$cookies[key]=angular.toJson(value)},remove:function(key){delete $cookies[key]}}}])}(window,window.angular),function(window,angular){"use strict";function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}var index,chars,match,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(chars=!0,stack.last()&&specialElements[stack.last()])html=html.replace(new RegExp("(.*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last());else if(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag),chars=!1)),chars){index=html.indexOf("<");var text=0>index?html:html.substring(0,index);html=0>index?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text))}if(html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){if(!value)return"";var parts=spaceRe.exec(value),spaceBefore=parts[1],spaceAfter=parts[3],content=parts[2];return content&&(hiddenPre.innerHTML=content.replace(/</g,"&lt;"),content="textContent"in hiddenPre?hiddenPre.textContent:hiddenPre.innerText),spaceBefore+content+spaceAfter}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;validAttrs[lkey]!==!0||uriAttrs[lkey]===!0&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,END_TAG_REGEXP=/^<\s*\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\s*\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap"),validAttrs=angular.extend({},uriAttrs,makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width")),hiddenPre=document.createElement("pre"),spaceRe=/^(\s*)([\s\S]*?)(\s*)$/;angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,MAILTO_REGEXP=/^mailto:/;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&(html.push('target="'),html.push(target),html.push('" ')),html.push('href="'),html.push(url),html.push('">'),addText(text),html.push("</a>")}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]==match[3]&&(url="mailto:"+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),function(window,angular){"use strict";function $RouteProvider(){function inherit(parent,extra){return angular.extend(new(angular.extend(function(){},{prototype:parent})),extra)}function pathRegExp(path,opts){var insensitive=opts.caseInsensitiveMatch,ret={originalPath:path,regexp:path},keys=ret.keys=[];return path=path.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(_,slash,key,option){var optional="?"===option?option:null,star="*"===option?option:null;return keys.push({name:key,optional:!!optional}),slash=slash||"",""+(optional?"":slash)+"(?:"+(optional?slash:"")+(star&&"(.+?)"||"([^/]+)")+(optional||"")+")"+(optional||"")}).replace(/([\/$\*])/g,"\\$1"),ret.regexp=new RegExp("^"+path+"$",insensitive?"i":""),ret}var routes={};this.when=function(path,route){if(routes[path]=angular.extend({reloadOnSearch:!0},route,path&&pathRegExp(path,route)),path){var redirectPath="/"==path[path.length-1]?path.substr(0,path.length-1):path+"/";routes[redirectPath]=angular.extend({redirectTo:path},pathRegExp(redirectPath,route))}return this},this.otherwise=function(params){return this.when(null,params),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache","$sce",function($rootScope,$location,$routeParams,$q,$injector,$http,$templateCache,$sce){function switchRouteMatcher(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;for(var i=1,len=m.length;len>i;++i){var key=keys[i-1],val="string"==typeof m[i]?decodeURIComponent(m[i]):m[i];key&&val&&(params[key.name]=val)}return params}function updateRoute(){var next=parseRoute(),last=$route.current;next&&last&&next.$$route===last.$$route&&angular.equals(next.pathParams,last.pathParams)&&!next.reloadOnSearch&&!forceReload?(last.params=next.params,angular.copy(last.params,$routeParams),$rootScope.$broadcast("$routeUpdate",last)):(next||last)&&(forceReload=!1,$rootScope.$broadcast("$routeChangeStart",next,last),$route.current=next,next&&next.redirectTo&&(angular.isString(next.redirectTo)?$location.path(interpolate(next.redirectTo,next.params)).search(next.params).replace():$location.url(next.redirectTo(next.pathParams,$location.path(),$location.search())).replace()),$q.when(next).then(function(){if(next){var template,templateUrl,locals=angular.extend({},next.resolve);return angular.forEach(locals,function(value,key){locals[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value)}),angular.isDefined(template=next.template)?angular.isFunction(template)&&(template=template(next.params)):angular.isDefined(templateUrl=next.templateUrl)&&(angular.isFunction(templateUrl)&&(templateUrl=templateUrl(next.params)),templateUrl=$sce.getTrustedResourceUrl(templateUrl),angular.isDefined(templateUrl)&&(next.loadedTemplateUrl=templateUrl,template=$http.get(templateUrl,{cache:$templateCache}).then(function(response){return response.data}))),angular.isDefined(template)&&(locals.$template=template),$q.all(locals)}}).then(function(locals){next==$route.current&&(next&&(next.locals=locals,angular.copy(next.params,$routeParams)),$rootScope.$broadcast("$routeChangeSuccess",next,last))},function(error){next==$route.current&&$rootScope.$broadcast("$routeChangeError",next,last,error)}))}function parseRoute(){var params,match;return angular.forEach(routes,function(route){!match&&(params=switchRouteMatcher($location.path(),route))&&(match=inherit(route,{params:angular.extend({},$location.search(),params),pathParams:params}),match.$$route=route)}),match||routes[null]&&inherit(routes[null],{params:{},pathParams:{}})}function interpolate(string,params){var result=[];return angular.forEach((string||"").split(":"),function(segment,i){if(0===i)result.push(segment);else{var segmentMatch=segment.match(/(\w+)(.*)/),key=segmentMatch[1];result.push(params[key]),result.push(segmentMatch[2]||""),delete params[key]}}),result.join("")}var forceReload=!1,$route={routes:routes,reload:function(){forceReload=!0,$rootScope.$evalAsync(updateRoute)}};return $rootScope.$on("$locationChangeSuccess",updateRoute),$route}]}function $RouteParamsProvider(){this.$get=function(){return{}}}function ngViewFactory($route,$anchorScroll,$animate){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(scope,$element,attr,ctrl,$transclude){function cleanupLastView(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement,function(){previousElement=null}),previousElement=currentElement,currentElement=null)}function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(angular.isDefined(template)){var newScope=scope.$new(),current=$route.current,clone=$transclude(newScope,function(clone){$animate.enter(clone,null,currentElement||$element,function(){!angular.isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()}),cleanupLastView()});currentElement=clone,currentScope=current.scope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}else cleanupLastView()}var currentScope,currentElement,previousElement,autoScrollExp=attr.autoscroll,onloadExp=attr.onload||"";scope.$on("$routeChangeSuccess",update),update()}}}function ngViewFillContentFactory($compile,$controller,$route){return{restrict:"ECA",priority:-400,link:function(scope,$element){var current=$route.current,locals=current.locals;$element.html(locals.$template);var link=$compile($element.contents());if(current.controller){locals.$scope=scope;var controller=$controller(current.controller,locals);current.controllerAs&&(scope[current.controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}var ngRouteModule=angular.module("ngRoute",["ng"]).provider("$route",$RouteProvider);ngRouteModule.provider("$routeParams",$RouteParamsProvider),ngRouteModule.directive("ngView",ngViewFactory),ngRouteModule.directive("ngView",ngViewFillContentFactory),ngViewFactory.$inject=["$route","$anchorScroll","$animate"],ngViewFillContentFactory.$inject=["$compile","$controller","$route"]}(window,window.angular),function(){function baseIndexOf(array,value,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0;++index<length;)if(array[index]===value)return index;return-1}function cacheIndexOf(cache,value){var type=typeof value;if(cache=cache.cache,"boolean"==type||null==value)return cache[value]?0:-1;"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value;return cache=(cache=cache[type])&&cache[key],"object"==type?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if("boolean"==type||null==value)cache[value]=!0;else{"number"!=type&&"string"!=type&&(type="object");var key="number"==type?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});"object"==type?(typeCache[key]||(typeCache[key]=[])).push(value):typeCache[key]=!0}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){for(var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;++index<length;){var value=ac[index],other=bc[index];if(value!==other){if(value>other||"undefined"==typeof value)return 1;if(other>value||"undefined"==typeof other)return-1}}return a.index-b.index}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&"object"==typeof first&&mid&&"object"==typeof mid&&last&&"object"==typeof last)return!1;var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache.undefined=!1;var result=getObject();for(result.array=array,result.cache=cache,result.push=cachePush;++index<length;)result.push(array[index]);return result}function escapeStringChar(match){return"\\"+stringEscapes[match]}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function releaseArray(array){array.length=0,arrayPool.length<maxPoolSize&&arrayPool.push(array)}function releaseObject(object){var cache=object.cache;cache&&releaseObject(cache),object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null,objectPool.length<maxPoolSize&&objectPool.push(object)}function slice(array,start,end){start||(start=0),"undefined"==typeof end&&(end=array?array.length:0);for(var index=-1,length=end-start||0,result=Array(0>length?0:length);++index<length;)result[index]=array[start+index];return result}function runInContext(context){function lodash(value){return value&&"object"==typeof value&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll,this.__wrapped__=value}function baseBind(bindData){function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];return setBindData(bound,bindData),bound}function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if("undefined"!=typeof result)return result}var isObj=isObject(value);if(!isObj)return value;var className=toString.call(value);if(!cloneableClasses[className])return value;var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:return result=ctor(value.source,reFlags.exec(value)),result.lastIndex=value.lastIndex,result}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==value)return stackB[length];result=isArr?ctor(value.length):{}}else result=isArr?slice(value):assign({},value);return isArr&&(hasOwnProperty.call(value,"index")&&(result.index=value.index),hasOwnProperty.call(value,"input")&&(result.input=value.input)),isDeep?(stackA.push(value),stackB.push(result),(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB)}),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result):result}function baseCreate(prototype){return isObject(prototype)?nativeCreate(prototype):{}}function baseCreateCallback(func,thisArg,argCount){if("function"!=typeof func)return identity;if("undefined"==typeof thisArg||!("prototype"in func))return func;var bindData=func.__bindData__;if("undefined"==typeof bindData&&(support.funcNames&&(bindData=!func.name),bindData=bindData||!support.funcDecomp,!bindData)){var source=fnToString.call(func);support.funcNames||(bindData=!reFuncName.test(source)),bindData||(bindData=reThis.test(source),setBindData(func,bindData))}if(bindData===!1||bindData!==!0&&1&bindData[1])return func;switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if((partialRightArgs||isCurry)&&(args||(args=slice(arguments)),partialRightArgs&&push.apply(args,partialRightArgs),isCurry&&args.length<arity))return bitmask|=16,baseCreateWrapper([func,isCurryBound?bitmask:-4&bitmask,args,null,thisArg,arity]);if(args||(args=arguments),isBindKey&&(func=thisBinding[key]),this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5],isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isCurryBound=8&bitmask,key=func;return setBindData(bound,bindData),bound}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);cache?(indexOf=cacheIndexOf,values=cache):isLarge=!1}for(;++index<length;){var value=array[index];indexOf(values,value)<0&&result.push(value)}return isLarge&&releaseObject(values),result}function baseFlatten(array,isShallow,isStrict,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];if(value&&"object"==typeof value&&"number"==typeof value.length&&(isArray(value)||isArguments(value))){isShallow||(value=baseFlatten(value,isShallow,isStrict));var valIndex=-1,valLength=value.length,resIndex=result.length;for(result.length+=valLength;++valIndex<valLength;)result[resIndex++]=value[valIndex]}else isStrict||result.push(value)}return result}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if("undefined"!=typeof result)return!!result}if(a===b)return 0!==a||1/a==1/b;var type=typeof a,otherType=typeof b;if(!(a!==a||a&&objectTypes[type]||b&&objectTypes[otherType]))return!1;if(null==a||null==b)return a===b;var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass&&(className=objectClass),otherClass==argsClass&&(otherClass=objectClass),className!=otherClass)return!1;switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped)return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB);if(className!=objectClass)return!1;var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&"constructor"in a&&"constructor"in b)return!1}var initedStack=!stackA;stackA||(stackA=getArray()),stackB||(stackB=getArray());for(var length=stackA.length;length--;)if(stackA[length]==a)return stackB[length]==b;var size=0;if(result=!0,stackA.push(a),stackB.push(b),isArr){if(length=a.length,size=b.length,result=size==length,result||isWhere)for(;size--;){var index=length,value=b[size];if(isWhere)for(;index--&&!(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)););else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB)))break}}else forIn(b,function(value,key,b){return hasOwnProperty.call(b,key)?(size++,result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)):void 0}),result&&!isWhere&&forIn(a,function(value,key,a){return hasOwnProperty.call(a,key)?result=--size>-1:void 0});return stackA.pop(),stackB.pop(),initedStack&&(releaseArray(stackA),releaseArray(stackB)),result}function baseMerge(object,source,callback,stackA,stackB){(isArray(source)?forEach:forOwn)(source,function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){for(var stackLength=stackA.length;stackLength--;)if(found=stackA[stackLength]==source){value=stackB[stackLength];break}if(!found){var isShallow;callback&&(result=callback(value,source),(isShallow="undefined"!=typeof result)&&(value=result)),isShallow||(value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}),stackA.push(source),stackB.push(value),isShallow||baseMerge(value,source,callback,stackA,stackB)}}else callback&&(result=callback(value,source),"undefined"==typeof result&&(result=source)),"undefined"!=typeof result&&(value=result);object[key]=value})}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[],isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf,seen=cache}for(;++index<length;){var value=array[index],computed=callback?callback(value,index,array):value;(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0)&&((callback||isLarge)&&seen.push(computed),result.push(value))}return isLarge?(releaseArray(seen.array),releaseObject(seen)):callback&&releaseArray(seen),result}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];setter(result,value,callback(value,index,collection),collection)}else forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection)});return result}}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=1&bitmask,isBindKey=2&bitmask,isCurry=4&bitmask,isPartial=16&bitmask,isPartialRight=32&bitmask;if(!isBindKey&&!isFunction(func))throw new TypeError;isPartial&&!partialArgs.length&&(bitmask&=-17,isPartial=partialArgs=!1),isPartialRight&&!partialRightArgs.length&&(bitmask&=-33,isPartialRight=partialRightArgs=!1);var bindData=func&&func.__bindData__;if(bindData&&bindData!==!0)return bindData=slice(bindData),bindData[2]&&(bindData[2]=slice(bindData[2])),bindData[3]&&(bindData[3]=slice(bindData[3])),!isBind||1&bindData[1]||(bindData[4]=thisArg),!isBind&&1&bindData[1]&&(bitmask|=8),!isCurry||4&bindData[1]||(bindData[5]=arity),isPartial&&push.apply(bindData[2]||(bindData[2]=[]),partialArgs),isPartialRight&&unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs),bindData[1]|=bitmask,createWrapper.apply(null,bindData);
var creater=1==bitmask||17===bitmask?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}function isNative(value){return"function"==typeof value&&reNative.test(value)}function shimIsPlainObject(value){var ctor,result;return value&&toString.call(value)==objectClass&&(ctor=value.constructor,!isFunction(ctor)||ctor instanceof ctor)?(forIn(value,function(value,key){result=key}),"undefined"==typeof result||hasOwnProperty.call(value,result)):!1}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==argsClass||!1}function clone(value,isDeep,callback,thisArg){return"boolean"!=typeof isDeep&&null!=isDeep&&(thisArg=callback,callback=isDeep,isDeep=!1),baseClone(value,isDeep,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function cloneDeep(value,callback,thisArg){return baseClone(value,!0,"function"==typeof callback&&baseCreateCallback(callback,thisArg,1))}function create(prototype,properties){var result=baseCreate(prototype);return properties?assign(result,properties):result}function findKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function findLastKey(object,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forOwnRight(object,function(value,key,object){return callback(value,key,object)?(result=key,!1):void 0}),result}function forInRight(object,callback,thisArg){var pairs=[];forIn(object,function(value,key){pairs.push(key,value)});var length=pairs.length;for(callback=baseCreateCallback(callback,thisArg,3);length--&&callback(pairs[length--],pairs[length],object)!==!1;);return object}function forOwnRight(object,callback,thisArg){var props=keys(object),length=props.length;for(callback=baseCreateCallback(callback,thisArg,3);length--;){var key=props[length];if(callback(object[key],key,object)===!1)break}return object}function functions(object){var result=[];return forIn(object,function(value,key){isFunction(value)&&result.push(key)}),result.sort()}function has(object,key){return object?hasOwnProperty.call(object,key):!1}function invert(object){for(var index=-1,props=keys(object),length=props.length,result={};++index<length;){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===!0||value===!1||value&&"object"==typeof value&&toString.call(value)==boolClass||!1}function isDate(value){return value&&"object"==typeof value&&toString.call(value)==dateClass||!1}function isElement(value){return value&&1===value.nodeType||!1}function isEmpty(value){var result=!0;if(!value)return result;var className=toString.call(value),length=value.length;return className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&"number"==typeof length&&isFunction(value.splice)?!length:(forOwn(value,function(){return result=!1}),result)}function isEqual(a,b,callback,thisArg){return baseIsEqual(a,b,"function"==typeof callback&&baseCreateCallback(callback,thisArg,2))}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return"function"==typeof value}function isObject(value){return!(!value||!objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return null===value}function isNumber(value){return"number"==typeof value||value&&"object"==typeof value&&toString.call(value)==numberClass||!1}function isRegExp(value){return value&&"object"==typeof value&&toString.call(value)==regexpClass||!1}function isString(value){return"string"==typeof value||value&&"object"==typeof value&&toString.call(value)==stringClass||!1}function isUndefined(value){return"undefined"==typeof value}function mapValues(object,callback,thisArg){var result={};return callback=lodash.createCallback(callback,thisArg,3),forOwn(object,function(value,key,object){result[key]=callback(value,key,object)}),result}function merge(object){var args=arguments,length=2;if(!isObject(object))return object;if("number"!=typeof args[2]&&(length=args.length),length>3&&"function"==typeof args[length-2])var callback=baseCreateCallback(args[--length-1],args[length--],2);else length>2&&"function"==typeof args[length-1]&&(callback=args[--length]);for(var sources=slice(arguments,1,length),index=-1,stackA=getArray(),stackB=getArray();++index<length;)baseMerge(object,sources[index],callback,stackA,stackB);return releaseArray(stackA),releaseArray(stackB),object}function omit(object,callback,thisArg){var result={};if("function"!=typeof callback){var props=[];forIn(object,function(value,key){props.push(key)}),props=baseDifference(props,baseFlatten(arguments,!0,!1,1));for(var index=-1,length=props.length;++index<length;){var key=props[index];result[key]=object[key]}}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)||(result[key]=value)});return result}function pairs(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if("function"!=typeof callback)for(var index=-1,props=baseFlatten(arguments,!0,!1,1),length=isObject(object)?props.length:0;++index<length;){var key=props[index];key in object&&(result[key]=object[key])}else callback=lodash.createCallback(callback,thisArg,3),forIn(object,function(value,key,object){callback(value,key,object)&&(result[key]=value)});return result}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);if(null==accumulator)if(isArr)accumulator=[];else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=baseCreate(proto)}return callback&&(callback=lodash.createCallback(callback,thisArg,4),(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object)})),accumulator}function values(object){for(var index=-1,props=keys(object),length=props.length,result=Array(length);++index<length;)result[index]=object[props[index]];return result}function at(collection){for(var args=arguments,index=-1,props=baseFlatten(args,!0,!1,1),length=args[2]&&args[2][args[1]]===collection?1:props.length,result=Array(length);++index<length;)result[index]=collection[props[index]];return result}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=!1;return fromIndex=(0>fromIndex?nativeMax(0,length+fromIndex):fromIndex)||0,isArray(collection)?result=indexOf(collection,target,fromIndex)>-1:"number"==typeof length?result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1:forOwn(collection,function(value){return++index>=fromIndex?!(result=value===target):void 0}),result}function every(collection,callback,thisArg){var result=!0;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&(result=!!callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)});return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length;){var value=collection[index];callback(value,index,collection)&&result.push(value)}else forOwn(collection,function(value,index,collection){callback(value,index,collection)&&result.push(value)});return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"!=typeof length){var result;return forOwn(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}for(;++index<length;){var value=collection[index];if(callback(value,index,collection))return value}}function findLast(collection,callback,thisArg){var result;return callback=lodash.createCallback(callback,thisArg,3),forEachRight(collection,function(value,index,collection){return callback(value,index,collection)?(result=value,!1):void 0}),result}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;++index<length&&callback(collection[index],index,collection)!==!1;);else forOwn(collection,callback);return collection}function forEachRight(collection,callback,thisArg){var length=collection?collection.length:0;if(callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3),"number"==typeof length)for(;length--&&callback(collection[length],length,collection)!==!1;);else{var props=keys(collection);length=props.length,forOwn(collection,function(value,key,collection){return key=props?props[--length]:--length,callback(collection[key],key,collection)})}return collection}function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc="function"==typeof methodName,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)}),result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;if(callback=lodash.createCallback(callback,thisArg,3),"number"==typeof length)for(var result=Array(length);++index<length;)result[index]=callback(collection[index],index,collection);else result=[],forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)});return result}function max(collection,callback,thisArg){var computed=-1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];value>result&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);current>computed&&(computed=current,result=value)});return result}function min(collection,callback,thisArg){var computed=1/0,result=computed;if("function"!=typeof callback&&thisArg&&thisArg[callback]===collection&&(callback=null),null==callback&&isArray(collection))for(var index=-1,length=collection.length;++index<length;){var value=collection[index];result>value&&(result=value)}else callback=null==callback&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3),forEach(collection,function(value,index,collection){var current=callback(value,index,collection);computed>current&&(computed=current,result=value)});return result}function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if("number"==typeof length)for(noaccum&&(accumulator=collection[++index]);++index<length;)accumulator=callback(accumulator,collection[index],index,collection);else forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)});return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;return callback=lodash.createCallback(callback,thisArg,4),forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=!1,value):callback(accumulator,value,index,collection)}),accumulator}function reject(collection,callback,thisArg){return callback=lodash.createCallback(callback,thisArg,3),filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function sample(collection,n,guard){if(collection&&"number"!=typeof collection.length&&(collection=values(collection)),null==n||guard)return collection?collection[baseRandom(0,collection.length-1)]:undefined;var result=shuffle(collection);return result.length=nativeMin(nativeMax(0,n),result.length),result}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array("number"==typeof length?length:0);return forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand],result[rand]=value}),result}function size(collection){var length=collection?collection.length:0;return"number"==typeof length?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if("number"==typeof length)for(;++index<length&&!(result=callback(collection[index],index,collection)););else forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))});return!!result}function sortBy(collection,callback,thisArg){var index=-1,isArr=isArray(callback),length=collection?collection.length:0,result=Array("number"==typeof length?length:0);for(isArr||(callback=lodash.createCallback(callback,thisArg,3)),forEach(collection,function(value,key,collection){var object=result[++index]=getObject();isArr?object.criteria=map(callback,function(key){return value[key]}):(object.criteria=getArray())[0]=callback(value,key,collection),object.index=index,object.value=value}),length=result.length,result.sort(compareAscending);length--;){var object=result[length];result[length]=object.value,isArr||releaseArray(object.criteria),releaseObject(object)}return result}function toArray(collection){return collection&&"number"==typeof collection.length?slice(collection):values(collection)}function compact(array){for(var index=-1,length=array?array.length:0,result=[];++index<length;){var value=array[index];value&&result.push(value)}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,!0,!0,1))}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length;)if(callback(array[index],index,array))return index;return-1}function findLastIndex(array,callback,thisArg){var length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);length--;)if(callback(array[length],length,array))return length;return-1}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=-1;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[0]:undefined;return slice(array,0,nativeMin(nativeMax(0,n),length))}function flatten(array,isShallow,callback,thisArg){return"boolean"!=typeof isShallow&&null!=isShallow&&(thisArg=callback,callback="function"!=typeof isShallow&&thisArg&&thisArg[isShallow]===array?null:isShallow,isShallow=!1),null!=callback&&(array=map(array,callback,thisArg)),baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if("number"==typeof fromIndex){var length=array?array.length:0;fromIndex=0>fromIndex?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:callback||n;return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(){for(var args=[],argsIndex=-1,argsLength=arguments.length,caches=getArray(),indexOf=getIndexOf(),trustIndexOf=indexOf===baseIndexOf,seen=getArray();++argsIndex<argsLength;){var value=arguments[argsIndex];(isArray(value)||isArguments(value))&&(args.push(value),caches.push(trustIndexOf&&value.length>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen)))}var array=args[0],index=-1,length=array?array.length:0,result=[];outer:for(;++index<length;){var cache=caches[0];if(value=array[index],(cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){for(argsIndex=argsLength,(cache||seen).push(value);--argsIndex;)if(cache=caches[argsIndex],(cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0)continue outer;result.push(value)}}for(;argsLength--;)cache=caches[argsLength],cache&&releaseObject(cache);return releaseArray(caches),releaseArray(seen),result}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if("number"!=typeof callback&&null!=callback){var index=length;for(callback=lodash.createCallback(callback,thisArg,3);index--&&callback(array[index],index,array);)n++}else if(n=callback,null==n||thisArg)return array?array[length-1]:undefined;return slice(array,nativeMax(0,length-n))}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;for("number"==typeof fromIndex&&(index=(0>fromIndex?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1);index--;)if(array[index]===value)return index;return-1}function pull(array){for(var args=arguments,argsIndex=0,argsLength=args.length,length=array?array.length:0;++argsIndex<argsLength;)for(var index=-1,value=args[argsIndex];++index<length;)array[index]===value&&(splice.call(array,index--,1),length--);return array}function range(start,end,step){start=+start||0,step="number"==typeof step?step:+step||1,null==end&&(end=start,start=0);for(var index=-1,length=nativeMax(0,ceil((end-start)/(step||1))),result=Array(length);++index<length;)result[index]=start,start+=step;return result}function remove(array,callback,thisArg){var index=-1,length=array?array.length:0,result=[];for(callback=lodash.createCallback(callback,thisArg,3);++index<length;){var value=array[index];callback(value,index,array)&&(result.push(value),splice.call(array,index--,1),length--)}return result}function rest(array,callback,thisArg){if("number"!=typeof callback&&null!=callback){var n=0,index=-1,length=array?array.length:0;for(callback=lodash.createCallback(callback,thisArg,3);++index<length&&callback(array[index],index,array);)n++}else n=null==callback||thisArg?1:nativeMax(0,callback);return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;for(callback=callback?lodash.createCallback(callback,thisArg,1):identity,value=callback(value);high>low;){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(){return baseUniq(baseFlatten(arguments,!0,!0))}function uniq(array,isSorted,callback,thisArg){return"boolean"!=typeof isSorted&&null!=isSorted&&(thisArg=callback,callback="function"!=typeof isSorted&&thisArg&&thisArg[isSorted]===array?null:isSorted,isSorted=!1),null!=callback&&(callback=lodash.createCallback(callback,thisArg,3)),baseUniq(array,isSorted,callback)}function without(array){return baseDifference(array,slice(arguments,1))}function xor(){for(var index=-1,length=arguments.length;++index<length;){var array=arguments[index];if(isArray(array)||isArguments(array))var result=result?baseUniq(baseDifference(result,array).concat(baseDifference(array,result))):array}return result||[]}function zip(){for(var array=arguments.length>1?arguments:arguments[0],index=-1,length=array?max(pluck(array,"length")):0,result=Array(0>length?0:length);++index<length;)result[index]=pluck(array,index);return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};for(values||!length||isArray(keys[0])||(values=[]);++index<length;){var key=keys[index];values?result[key]=values[index]:key&&(result[key[0]]=key[1])}return result}function after(n,func){if(!isFunction(func))throw new TypeError;return function(){return--n<1?func.apply(this,arguments):void 0}}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function bindAll(object){for(var funcs=arguments.length>1?baseFlatten(arguments,!0,!1,1):functions(object),index=-1,length=funcs.length;++index<length;){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object)}return object}function bindKey(object,key){return arguments.length>2?createWrapper(key,19,slice(arguments,2),null,object):createWrapper(key,3,null,null,object)}function compose(){for(var funcs=arguments,length=funcs.length;length--;)if(!isFunction(funcs[length]))throw new TypeError;return function(){for(var args=arguments,length=funcs.length;length--;)args=[funcs[length].apply(this,args)];return args[0]}}function curry(func,arity){return arity="number"==typeof arity?arity:+arity||func.length,createWrapper(func,4,null,null,null,arity)}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=!1,trailing=!0;if(!isFunction(func))throw new TypeError;if(wait=nativeMax(0,wait)||0,options===!0){var leading=!0;trailing=!1}else isObject(options)&&(leading=options.leading,maxWait="maxWait"in options&&(nativeMax(wait,options.maxWait)||0),trailing="trailing"in options?options.trailing:trailing);var delayed=function(){var remaining=wait-(now()-stamp);if(0>=remaining){maxTimeoutId&&clearTimeout(maxTimeoutId);var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined,isCalled&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))}else timeoutId=setTimeout(delayed,remaining)},maxDelayed=function(){timeoutId&&clearTimeout(timeoutId),maxTimeoutId=timeoutId=trailingCall=undefined,(trailing||maxWait!==wait)&&(lastCalled=now(),result=func.apply(thisArg,args),timeoutId||maxTimeoutId||(args=thisArg=null))};return function(){if(args=arguments,stamp=now(),thisArg=this,trailingCall=trailing&&(timeoutId||!leading),maxWait===!1)var leadingCall=leading&&!timeoutId;else{maxTimeoutId||leading||(lastCalled=stamp);var remaining=maxWait-(stamp-lastCalled),isCalled=0>=remaining;isCalled?(maxTimeoutId&&(maxTimeoutId=clearTimeout(maxTimeoutId)),lastCalled=stamp,result=func.apply(thisArg,args)):maxTimeoutId||(maxTimeoutId=setTimeout(maxDelayed,remaining))}return isCalled&&timeoutId?timeoutId=clearTimeout(timeoutId):timeoutId||wait===maxWait||(timeoutId=setTimeout(delayed,wait)),leadingCall&&(isCalled=!0,result=func.apply(thisArg,args)),!isCalled||timeoutId||maxTimeoutId||(args=thisArg=null),result}}function defer(func){if(!isFunction(func))throw new TypeError;var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}function delay(func,wait){if(!isFunction(func))throw new TypeError;var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){if(!isFunction(func))throw new TypeError;var memoized=function(){var cache=memoized.cache,key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)};return memoized.cache={},memoized}function once(func){var ran,result;if(!isFunction(func))throw new TypeError;return function(){return ran?result:(ran=!0,result=func.apply(this,arguments),func=null,result)}}function partial(func){return createWrapper(func,16,slice(arguments,1))}function partialRight(func){return createWrapper(func,32,null,slice(arguments,1))}function throttle(func,wait,options){var leading=!0,trailing=!0;if(!isFunction(func))throw new TypeError;return options===!1?leading=!1:isObject(options)&&(leading="leading"in options?options.leading:leading,trailing="trailing"in options?options.trailing:trailing),debounceOptions.leading=leading,debounceOptions.maxWait=wait,debounceOptions.trailing=trailing,debounce(func,wait,debounceOptions)}function wrap(value,wrapper){return createWrapper(wrapper,16,[value])}function constant(value){return function(){return value}}function createCallback(func,thisArg,argCount){var type=typeof func;if(null==func||"function"==type)return baseCreateCallback(func,thisArg,argCount);if("object"!=type)return property(func);var props=keys(func),key=props[0],a=func[key];return 1!=props.length||a!==a||isObject(a)?function(object){for(var length=props.length,result=!1;length--&&(result=baseIsEqual(object[props[length]],func[props[length]],null,!0)););return result}:function(object){var b=object[key];return a===b&&(0!==a||1/a==1/b)}}function escape(string){return null==string?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object,source,options){var chain=!0,methodNames=source&&functions(source);source&&(options||methodNames.length)||(null==options&&(options=source),ctor=lodashWrapper,source=object,object=lodash,methodNames=functions(source)),options===!1?chain=!1:isObject(options)&&"chain"in options&&(chain=options.chain);var ctor=object,isFunc=isFunction(ctor);forEach(methodNames,function(methodName){var func=object[methodName]=source[methodName];isFunc&&(ctor.prototype[methodName]=function(){var chainAll=this.__chain__,value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(object,args);if(chain||chainAll){if(value===result&&isObject(result))return this;result=new ctor(result),result.__chain__=chainAll}return result})})}function noConflict(){return context._=oldDash,this}function noop(){}function property(key){return function(object){return object[key]}}function random(min,max,floating){var noMin=null==min,noMax=null==max;if(null==floating&&("boolean"==typeof min&&noMax?(floating=min,min=1):noMax||"boolean"!=typeof max||(floating=max,noMax=!0)),noMin&&noMax&&(max=1),min=+min||0,noMax?(max=min,min=0):max=+max||0,floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value}}function template(text,data,options){var settings=lodash.templateSettings;text=String(text||""),options=defaults({},options,settings);var isEvaluating,imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports),index=0,interpolate=options.interpolate||reNoMatch,source="__p += '",reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){return interpolateValue||(interpolateValue=esTemplateValue),source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar),escapeValue&&(source+="' +\n__e("+escapeValue+") +\n'"),evaluateValue&&(isEvaluating=!0,source+="';\n"+evaluateValue+";\n__p += '"),interpolateValue&&(source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"),index=offset+match.length,match}),source+="';\n";var variable=options.variable,hasVariable=variable;hasVariable||(variable="obj",source="with ("+variable+") {\n"+source+"\n}\n"),source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//# sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){throw e.source=source,e}return data?result(data):(result.source=source,result)}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);for(callback=baseCreateCallback(callback,thisArg,1);++index<n;)result[index]=callback(index);return result}function unescape(string){return null==string?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(null==prefix?"":prefix)+id}function chain(value){return value=new lodashWrapper(value),value.__chain__=!0,value}function tap(value,interceptor){return interceptor(value),value}function wrapperChain(){return this.__chain__=!0,this}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError,arrayRef=[],objectProto=Object.prototype,oldDash=context._,toString=objectProto.toString,reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,setTimeout=context.setTimeout,splice=arrayRef.splice,unshift=arrayRef.unshift,defineProperty=function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func}catch(e){}return result}(),nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random,ctorByClass={};ctorByClass[arrayClass]=Array,ctorByClass[boolClass]=Boolean,ctorByClass[dateClass]=Date,ctorByClass[funcClass]=Function,ctorByClass[objectClass]=Object,ctorByClass[numberClass]=Number,ctorByClass[regexpClass]=RegExp,ctorByClass[stringClass]=String,lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.funcDecomp=!isNative(context.WinRTError)&&reThis.test(runInContext),support.funcNames="string"==typeof Function.name,lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}},nativeCreate||(baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}());var setBindData=defineProperty?function(func,value){descriptor.value=value,defineProperty(func,"__bindData__",descriptor)}:noop,isArray=nativeIsArray||function(value){return value&&"object"==typeof value&&"number"==typeof value.length&&toString.call(value)==arrayClass||!1},shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable)hasOwnProperty.call(iterable,index)&&result.push(index);return result},keys=nativeKeys?function(object){return isObject(object)?nativeKeys(object):[]}:shimKeys,htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},htmlUnescapes=invert(htmlEscapes),reEscapedHtml=RegExp("("+keys(htmlUnescapes).join("|")+")","g"),reUnescapedHtml=RegExp("["+keys(htmlEscapes).join("")+"]","g"),assign=function(object,source,guard){var index,iterable=object,result=iterable;
if(!iterable)return result;var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;if(argsLength>3&&"function"==typeof args[argsLength-2])var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2);else argsLength>2&&"function"==typeof args[argsLength-1]&&(callback=args[--argsLength]);for(;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],result[index]=callback?callback(result[index],iterable[index]):iterable[index];return result},defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;for(var args=arguments,argsIndex=0,argsLength="number"==typeof guard?2:args.length;++argsIndex<argsLength;)if(iterable=args[argsIndex],iterable&&objectTypes[typeof iterable])for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)index=ownProps[ownIndex],"undefined"==typeof result[index]&&(result[index]=iterable[index]);return result},forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable)if(callback(iterable[index],index,collection)===!1)return result;return result},forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&"undefined"==typeof thisArg?callback:baseCreateCallback(callback,thisArg,3);for(var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;++ownIndex<length;)if(index=ownProps[ownIndex],callback(iterable[index],index,collection)===!1)return result;return result},isPlainObject=getPrototypeOf?function(value){if(!value||toString.call(value)!=objectClass)return!1;var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)}:shimIsPlainObject,countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key]++:result[key]=1}),groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)}),indexBy=createAggregator(function(result,value,key){result[key]=value}),pluck=map,where=filter,now=isNative(now=Date.now)&&now||function(){return(new Date).getTime()},parseInt=8==nativeParseInt(whitespace+"08")?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};return lodash.after=after,lodash.assign=assign,lodash.at=at,lodash.bind=bind,lodash.bindAll=bindAll,lodash.bindKey=bindKey,lodash.chain=chain,lodash.compact=compact,lodash.compose=compose,lodash.constant=constant,lodash.countBy=countBy,lodash.create=create,lodash.createCallback=createCallback,lodash.curry=curry,lodash.debounce=debounce,lodash.defaults=defaults,lodash.defer=defer,lodash.delay=delay,lodash.difference=difference,lodash.filter=filter,lodash.flatten=flatten,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.functions=functions,lodash.groupBy=groupBy,lodash.indexBy=indexBy,lodash.initial=initial,lodash.intersection=intersection,lodash.invert=invert,lodash.invoke=invoke,lodash.keys=keys,lodash.map=map,lodash.mapValues=mapValues,lodash.max=max,lodash.memoize=memoize,lodash.merge=merge,lodash.min=min,lodash.omit=omit,lodash.once=once,lodash.pairs=pairs,lodash.partial=partial,lodash.partialRight=partialRight,lodash.pick=pick,lodash.pluck=pluck,lodash.property=property,lodash.pull=pull,lodash.range=range,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.shuffle=shuffle,lodash.sortBy=sortBy,lodash.tap=tap,lodash.throttle=throttle,lodash.times=times,lodash.toArray=toArray,lodash.transform=transform,lodash.union=union,lodash.uniq=uniq,lodash.values=values,lodash.where=where,lodash.without=without,lodash.wrap=wrap,lodash.xor=xor,lodash.zip=zip,lodash.zipObject=zipObject,lodash.collect=map,lodash.drop=rest,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.extend=assign,lodash.methods=functions,lodash.object=zipObject,lodash.select=filter,lodash.tail=rest,lodash.unique=uniq,lodash.unzip=zip,mixin(lodash),lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.contains=contains,lodash.escape=escape,lodash.every=every,lodash.find=find,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=findLast,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.has=has,lodash.identity=identity,lodash.indexOf=indexOf,lodash.isArguments=isArguments,lodash.isArray=isArray,lodash.isBoolean=isBoolean,lodash.isDate=isDate,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isNaN=isNaN,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isPlainObject=isPlainObject,lodash.isRegExp=isRegExp,lodash.isString=isString,lodash.isUndefined=isUndefined,lodash.lastIndexOf=lastIndexOf,lodash.mixin=mixin,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=now,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.result=result,lodash.runInContext=runInContext,lodash.size=size,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.template=template,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.all=every,lodash.any=some,lodash.detect=find,lodash.findWhere=find,lodash.foldl=reduce,lodash.foldr=reduceRight,lodash.include=contains,lodash.inject=reduce,mixin(function(){var source={};return forOwn(lodash,function(func,methodName){lodash.prototype[methodName]||(source[methodName]=func)}),source}(),!1),lodash.first=first,lodash.last=last,lodash.sample=sample,lodash.take=first,lodash.head=first,forOwn(lodash,function(func,methodName){var callbackable="sample"!==methodName;lodash.prototype[methodName]||(lodash.prototype[methodName]=function(n,guard){var chainAll=this.__chain__,result=func(this.__wrapped__,n,guard);return chainAll||null!=n&&(!guard||callbackable&&"function"==typeof n)?new lodashWrapper(result,chainAll):result})}),lodash.VERSION="2.4.1",lodash.prototype.chain=wrapperChain,lodash.prototype.toString=wrapperToString,lodash.prototype.value=wrapperValueOf,lodash.prototype.valueOf=wrapperValueOf,forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var chainAll=this.__chain__,result=func.apply(this.__wrapped__,arguments);return chainAll?new lodashWrapper(result,chainAll):result}}),forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return func.apply(this.__wrapped__,arguments),this}}),forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments),this.__chain__)}}),lodash}var undefined,arrayPool=[],objectPool=[],idCounter=0,keyPrefix=+new Date+"",largeArraySize=75,maxPoolSize=40,whitespace=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reFlags=/\w*$/,reFuncName=/^\s*function[ \n\r\t]+\w/,reInterpolate=/<%=([\s\S]+?)%>/g,reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)"),reNoMatch=/($^)/,reThis=/\bthis\b/,reUnescapedString=/['\n\r\t\u2028\u2029\\]/g,contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],templateCounter=0,argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]",cloneableClasses={};cloneableClasses[funcClass]=!1,cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=!0;var debounceOptions={leading:!1,maxWait:0,trailing:!1},descriptor={configurable:!1,enumerable:!1,value:null,writable:!1},objectTypes={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},root=objectTypes[typeof window]&&window||this,freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports,freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports,freeGlobal=objectTypes[typeof global]&&global;!freeGlobal||freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal);var _=runInContext();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(root._=_,define(function(){return _})):freeExports&&freeModule?moduleExports?(freeModule.exports=_)._=_:freeExports._=_:root._=_}.call(this),!function(){"use strict";function initialize(object,s){object.s=null!==s&&void 0!==s?"string"==typeof s?s:s.toString():s,object.orig=s,null!==s&&void 0!==s?object.__defineGetter__?object.__defineGetter__("length",function(){return object.s.length}):object.length=s.length:object.length=-1}function S(s){initialize(this,s)}function extendPrototype(){for(var name in __sp)!function(name){var func=__sp[name];__nsp.hasOwnProperty(name)||(methodsAdded.push(name),__nsp[name]=function(){return String.prototype.s=this,func.apply(this,arguments)})}(name)}function restorePrototype(){for(var i=0;i<methodsAdded.length;++i)delete String.prototype[methodsAdded[i]];methodsAdded.length=0}function getNativeStringProperties(){for(var names=getNativeStringPropertyNames(),retObj={},i=0;i<names.length;++i){var name=names[i],func=__nsp[name];try{var type=typeof func.apply("teststring",[]);retObj[name]=type}catch(e){}}return retObj}function getNativeStringPropertyNames(){var results=[];if(Object.getOwnPropertyNames)return results=Object.getOwnPropertyNames(__nsp),results.splice(results.indexOf("valueOf"),1),results.splice(results.indexOf("toString"),1),results;var stringNames={};for(var name in String.prototype)stringNames[name]=name;for(var name in Object.prototype)delete stringNames[name];for(var name in stringNames)results.push(name);return results}function Export(str){return new S(str)}function multiArgs(args,fn){var i,result=[];for(i=0;i<args.length;i++)result.push(args[i]),fn&&fn.call(args,args[i],i);return result}var VERSION="1.8.0",ENTITIES={},__nsp=String.prototype,__sp=S.prototype={between:function(left,right){var s=this.s,startPos=s.indexOf(left),endPos=s.indexOf(right,startPos+left.length);return new this.constructor(-1==endPos&&null!=right?"":-1==endPos&&null==right?s.substring(startPos+left.length):s.slice(startPos+left.length,endPos))},camelize:function(){var s=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(mathc,sep,c){return c?c.toUpperCase():""});return new this.constructor(s)},capitalize:function(){return new this.constructor(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(index){return this.s.charAt(index)},chompLeft:function(prefix){var s=this.s;return 0===s.indexOf(prefix)?(s=s.slice(prefix.length),new this.constructor(s)):this},chompRight:function(suffix){if(this.endsWith(suffix)){var s=this.s;return s=s.slice(0,s.length-suffix.length),new this.constructor(s)}return this},collapseWhitespace:function(){var s=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new this.constructor(s)},contains:function(ss){return this.s.indexOf(ss)>=0},count:function(ss){for(var count=0,pos=this.s.indexOf(ss);pos>=0;)count+=1,pos=this.s.indexOf(ss,pos+1);return count},dasherize:function(){var s=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new this.constructor(s)},decodeHtmlEntities:function(){var s=this.s;return s=s.replace(/&#(\d+);?/g,function(_,code){return String.fromCharCode(code)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(_,hex){return String.fromCharCode(parseInt(hex,16))}).replace(/&([^;\W]+;?)/g,function(m,e){var ee=e.replace(/;$/,""),target=ENTITIES[e]||e.match(/;$/)&&ENTITIES[ee];return"number"==typeof target?String.fromCharCode(target):"string"==typeof target?target:m}),new this.constructor(s)},endsWith:function(suffix){var l=this.s.length-suffix.length;return l>=0&&this.s.indexOf(suffix,l)===l},escapeHTML:function(){return new this.constructor(this.s.replace(/[&<>"']/g,function(m){return"&"+reversedEscapeChars[m]+";"}))},ensureLeft:function(prefix){var s=this.s;return 0===s.indexOf(prefix)?this:new this.constructor(prefix+s)},ensureRight:function(suffix){var s=this.s;return this.endsWith(suffix)?this:new this.constructor(s+suffix)},humanize:function(){if(null===this.s||void 0===this.s)return new this.constructor("");var s=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new this.constructor(s)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(N){if(N>=0){var s=this.s.substr(0,N);return new this.constructor(s)}return this.right(-N)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(len,ch){if(null==ch&&(ch=" "),this.s.length>=len)return new this.constructor(this.s);len-=this.s.length;var left=Array(Math.ceil(len/2)+1).join(ch),right=Array(Math.floor(len/2)+1).join(ch);return new this.constructor(left+this.s+right)},padLeft:function(len,ch){return null==ch&&(ch=" "),new this.constructor(this.s.length>=len?this.s:Array(len-this.s.length+1).join(ch)+this.s)},padRight:function(len,ch){return null==ch&&(ch=" "),new this.constructor(this.s.length>=len?this.s:this.s+Array(len-this.s.length+1).join(ch))},parseCSV:function(delimiter,qualifier,escape,lineDelimiter){delimiter=delimiter||",",escape=escape||"\\","undefined"==typeof qualifier&&(qualifier='"');var i=0,fieldBuffer=[],fields=[],len=this.s.length,inField=!1,self=this,ca=function(i){return self.s.charAt(i)};if("undefined"!=typeof lineDelimiter)var rows=[];for(qualifier||(inField=!0);len>i;){var current=ca(i);switch(current){case escape:if(inField&&(escape!==qualifier||ca(i+1)===qualifier)){i+=1,fieldBuffer.push(ca(i));break}if(escape!==qualifier)break;case qualifier:inField=!inField;break;case delimiter:inField&&qualifier?fieldBuffer.push(current):(fields.push(fieldBuffer.join("")),fieldBuffer.length=0);break;case lineDelimiter:inField?fieldBuffer.push(current):rows&&(fields.push(fieldBuffer.join("")),rows.push(fields),fields=[],fieldBuffer.length=0);break;default:inField&&fieldBuffer.push(current)}i+=1}return fields.push(fieldBuffer.join("")),rows?(rows.push(fields),rows):fields},replaceAll:function(ss,r){var s=this.s.split(ss).join(r);return new this.constructor(s)},right:function(N){if(N>=0){var s=this.s.substr(this.s.length-N,N);return new this.constructor(s)}return this.left(-N)},setValue:function(s){return initialize(this,s),this},slugify:function(){var sl=new S(this.s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===sl.charAt(0)&&(sl=sl.substr(1)),new this.constructor(sl)},startsWith:function(prefix){return 0===this.s.lastIndexOf(prefix,0)},stripPunctuation:function(){return new this.constructor(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var s=this.s,args=arguments.length>0?arguments:[""];return multiArgs(args,function(tag){s=s.replace(RegExp("</?"+tag+"[^<>]*>","gi"),"")}),new this.constructor(s)},template:function(values,opening,closing){var s=this.s,opening=opening||Export.TMPL_OPEN,closing=closing||Export.TMPL_CLOSE,open=opening.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),close=closing.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),r=new RegExp(open+"(.+?)"+close,"g"),matches=s.match(r)||[];return matches.forEach(function(match){var key=match.substring(opening.length,match.length-closing.length);"undefined"!=typeof values[key]&&(s=s.replace(match,values[key]))}),new this.constructor(s)},times:function(n){return new this.constructor(new Array(n+1).join(this.s))},toBoolean:function(){if("string"==typeof this.orig){var s=this.s.toLowerCase();return"true"===s||"yes"===s||"on"===s}return this.orig===!0||1===this.orig},toFloat:function(precision){var num=parseFloat(this.s);return precision?parseFloat(num.toFixed(precision)):num},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var s;return s="undefined"==typeof __nsp.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new this.constructor(s)},trimLeft:function(){var s;return s=__nsp.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new this.constructor(s)},trimRight:function(){var s;return s=__nsp.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new this.constructor(s)},truncate:function(length,pruneStr){var str=this.s;if(length=~~length,pruneStr=pruneStr||"...",str.length<=length)return new this.constructor(str);var tmpl=function(c){return c.toUpperCase()!==c.toLowerCase()?"A":" "},template=str.slice(0,length+1).replace(/.(?=\W*\w*$)/g,tmpl);return template=template.slice(template.length-2).match(/\w\w/)?template.replace(/\s*\S+$/,""):new S(template.slice(0,template.length-1)).trimRight().s,new S((template+pruneStr).length>str.length?str:str.slice(0,template.length)+pruneStr)},toCSV:function(){function hasVal(it){return null!==it&&""!==it}var delim=",",qualifier='"',escape="\\",encloseNumbers=!0,keys=!1,dataArray=[];if("object"==typeof arguments[0]?(delim=arguments[0].delimiter||delim,delim=arguments[0].separator||delim,qualifier=arguments[0].qualifier||qualifier,encloseNumbers=!!arguments[0].encloseNumbers,escape=arguments[0].escape||escape,keys=!!arguments[0].keys):"string"==typeof arguments[0]&&(delim=arguments[0]),"string"==typeof arguments[1]&&(qualifier=arguments[1]),null===arguments[1]&&(qualifier=null),this.orig instanceof Array)dataArray=this.orig;else for(var key in this.orig)this.orig.hasOwnProperty(key)&&dataArray.push(keys?key:this.orig[key]);for(var rep=escape+qualifier,buildString=[],i=0;i<dataArray.length;++i){var shouldQualify=hasVal(qualifier);if("number"==typeof dataArray[i]&&(shouldQualify&=encloseNumbers),shouldQualify&&buildString.push(qualifier),null!==dataArray[i]&&void 0!==dataArray[i]){var d=new S(dataArray[i]).replaceAll(qualifier,rep).s;buildString.push(d)}else buildString.push("");shouldQualify&&buildString.push(qualifier),delim&&buildString.push(delim)}return buildString.length=buildString.length-1,new this.constructor(buildString.join(""))},toString:function(){return this.s},underscore:function(){var s=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new S(this.s.charAt(0)).isUpper()&&(s="_"+s),new this.constructor(s)},unescapeHTML:function(){return new this.constructor(this.s.replace(/\&([^;]+);/g,function(entity,entityCode){var match;return entityCode in escapeChars?escapeChars[entityCode]:(match=entityCode.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(match[1],16)):(match=entityCode.match(/^#(\d+)$/))?String.fromCharCode(~~match[1]):entity}))},valueOf:function(){return this.s.valueOf()}},methodsAdded=[],nativeProperties=getNativeStringProperties();for(var name in nativeProperties)!function(name){var stringProp=__nsp[name];"function"==typeof stringProp&&(__sp[name]||(__sp[name]="string"===nativeProperties[name]?function(){return new this.constructor(stringProp.apply(this,arguments))}:stringProp))}(name);__sp.repeat=__sp.times,__sp.include=__sp.contains,__sp.toInteger=__sp.toInt,__sp.toBool=__sp.toBoolean,__sp.decodeHTMLEntities=__sp.decodeHtmlEntities,__sp.constructor=S,Export.extendPrototype=extendPrototype,Export.restorePrototype=restorePrototype,Export.VERSION=VERSION,Export.TMPL_OPEN="{{",Export.TMPL_CLOSE="}}",Export.ENTITIES=ENTITIES,"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=Export:"function"==typeof define&&define.amd?define([],function(){return Export}):window.S=Export;var escapeChars={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},reversedEscapeChars={};for(var key in escapeChars)reversedEscapeChars[escapeChars[key]]=key;ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this),angular.module("confRegistrationWebApp").factory("currentRegistrationInterceptor",["$q","$injector",function($q,$injector){return{responseError:function(rejection){var regExp=/conferences\/[-a-zA-Z0-9]+\/registrations\/current\/?$/;if(404===rejection.status&&regExp.test(rejection.config.url)){var url=rejection.config.url.split("/");return _.isEmpty(_.last(url))&&url.pop(),url.pop(),$injector.get("$http").post(url.join("/"),{})}return $q.reject(rejection)}}}]),angular.module("confRegistrationWebApp").factory("authorizationInterceptor",["$cookies",function($cookies){return{request:function(config){return config.headers.PreviousAuthorization=$cookies.crsPreviousToken,config.headers.Authorization=$cookies.crsToken,config.withCredentials=!0,config}}}]),angular.module("confRegistrationWebApp").factory("unauthorizedInterceptor",["$q","$cookies",function($q,$cookies){return{responseError:function(rejection){return _.contains([401,0],rejection.status)&&angular.isDefined($cookies.crsToken)&&(delete $cookies.crsToken,delete $cookies.crsPreviousToken,location.reload()),$q.reject(rejection)}}}]),angular.module("confRegistrationWebApp").factory("statusInterceptor",function(){return{response:function(response){return _.isUndefined(response.data.statusCode)||(response.status=response.data.statusCode),response}}}),angular.module("confRegistrationWebApp").factory("debouncePutsInterceptor",["$timeout",function($timeout){var waitingRequests={},passThrough=function(config){var fn=function(){waitingRequests[config.url].holdRequests=!1};waitingRequests[config.url]={holdRequests:!0,timer:$timeout(fn,200)}},holdRequest=function(config){$timeout.cancel(waitingRequests[config.url].timer);var fn=function(){return waitingRequests[config.url].holdRequests=!1,config};return waitingRequests[config.url].timer=$timeout(fn,200),waitingRequests[config.url].timer};return{request:function(config){var deferredConfig;return"PUT"===config.method&&(waitingRequests[config.url]&&waitingRequests[config.url].holdRequests?deferredConfig=holdRequest(config):passThrough(config)),deferredConfig||config}}}]),angular.module("confRegistrationWebApp").constant("uuid",function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0,v="x"==c?r:3&r|8;return v.toString(16)})}),angular.module("confRegistrationWebApp").constant("apiUrl","http://CRS-elb-2069964056.us-east-1.elb.amazonaws.com:8080/crs-http-json-api/rest/"),angular.module("confRegistrationWebApp").factory("httpUrlInterceptor",["apiUrl",function(apiUrl){return{request:function(config){var passthroughRegexs=[/https?:\/\/.*/,/^views\/.*/,/template\/.*/],match=function(regexp){return regexp.test(config.url)};return _.any(passthroughRegexs,match)||(config.url=apiUrl+config.url),config}}}]),angular.module("confRegistrationWebApp").service("GrowlService",["$rootScope","Model","$timeout",function($rootScope,Model,$timeout){var growlPath,growlObject,growlTimeout;this.growl=function(path,object,message){growlPath=path,growlObject=angular.copy(object),$rootScope.growlMessage=message,$timeout.cancel(growlTimeout),growlTimeout=$timeout(function(){$rootScope.growlMessage=""},5e3)},$rootScope.growlUndo=function(){Model.update(growlPath,growlObject),$rootScope.growlMessage="",$timeout.cancel(growlTimeout)}}]),angular.module("confRegistrationWebApp").controller("RegistrationCtrl",["$scope","$rootScope","conference","currentRegistration","$routeParams","$location",function($scope,$rootScope,conference,currentRegistration,$routeParams,$location){function getPageById(pageId){for(var pages=conference.registrationPages,i=0;i<pages.length;i++)if(angular.equals(pageId,pages[i].id))return pages[i]}function getPageAfterById(pageId){for(var pages=conference.registrationPages,i=0;i<pages.length;i++)if(angular.equals(pageId,pages[i].id))return pages[i+1]}$scope.validPages={},$scope.$on("pageValid",function(event,validity){event.stopPropagation(),$scope.validPages[event.targetScope.page.id]=validity,$scope.registrationComplete=_.filter($scope.validPages).length===conference.registrationPages.length}),$scope.conference=conference,$scope.currentRegistration=currentRegistration,currentRegistration.completed&&($scope.currentRegistration.remainingBalance=currentRegistration.totalDue,currentRegistration.pastPayments.forEach(function(payment){$scope.currentRegistration.remainingBalance-=payment.amount}));var pageId=$routeParams.pageId;$scope.activePageId=pageId||"",$scope.page=getPageById(pageId),$scope.activePageIndex=_.findIndex(conference.registrationPages,{id:pageId}),$scope.nextPage=getPageAfterById(pageId),$scope.validateAndGoToNext=function(){$location.path("/"+$rootScope.registerMode+"/"+conference.id+"/page/"+$scope.nextPage.id)},$scope.goToReviewOrPayment=function(){$location.path(conference.acceptCreditCards&&_.isUndefined($rootScope.currentPayment)?"/payment/"+conference.id:"/reviewRegistration/"+conference.id)},$scope.isConferenceCost=function(){return conference.conferenceCost>0}}]),angular.module("confRegistrationWebApp").directive("page",function(){return{templateUrl:"views/pageDirective.html",restrict:"E",controller:["$scope","$location",function($scope,$location){$scope.wizard=-1!==$location.path().indexOf("wizard"),$scope.$watch("pageForm.$valid",function(valid){$scope.$emit("pageValid",valid)})}]}}),angular.module("confRegistrationWebApp").directive("crsBlock",function(){return{templateUrl:"views/blockDirective.html",restrict:"A",controller:["$scope","AnswerCache","RegistrationCache","uuid",function($scope,AnswerCache,RegistrationCache,uuid){$scope._=_,$scope.wizard||(RegistrationCache.getCurrent($scope.conference.id).then(function(currentRegistration){var answerForThisBlock=_.where(currentRegistration.answers,{blockId:$scope.block.id});answerForThisBlock.length>0&&($scope.answer=answerForThisBlock[0]),angular.isUndefined($scope.answer)&&($scope.answer={id:uuid(),registrationId:currentRegistration.id,blockId:$scope.block.id,value:"checkboxQuestion"===$scope.block.type?{}:""},currentRegistration.answers.push($scope.answer))}),AnswerCache.syncBlock($scope,"answer")),$scope.editBlockAddOption=function(){angular.isUndefined($scope.this.block.content.choices)&&($scope.this.block.content={choices:[]}),$.inArray($scope.$$childTail.editBlockAddOptionValue,$scope.this.block.content.choices)>=0||($scope.this.block.content.choices.push($scope.$$childTail.editBlockAddOptionValue),$scope.$$childTail.editBlockAddOptionValue="",console.log($scope.this.block.content.choices))},$scope.editBlockDeleteOption=function(index){$scope.this.block.content.choices.splice(index,1),console.log($scope.this.block.content.choices)},$scope.toggleProfileType=function(){if($scope.this.block.profileType||($scope.this.block.profileType=null),!_.isNull($scope.this.block.profileType)){var profileCount=0;$scope.conference.registrationPages.forEach(function(page){page.blocks.forEach(function(block){$scope.this.block.profileType===block.profileType&&profileCount++})}),profileCount>1&&(alert("Only one "+$scope.this.block.profileType.charAt(0).toUpperCase()+$scope.this.block.profileType.slice(1).toLowerCase()+" profile block can be used per form."),$scope.this.block.profileType=null)}}}]}}),angular.module("confRegistrationWebApp").directive("crsSigninBox",function(){return{templateUrl:"views/crsSigninBox.html",restrict:"E",controller:["$scope","$document","Model","apiUrl",function($scope,$document,Model,apiUrl){$scope.document=$document,$scope.apiUrl=apiUrl,Model.subscribe($scope,"profileData","profile")}],link:function(scope,element){scope.openBox=function(){scope.crsSigninBoxStatus=!scope.crsSigninBoxStatus},scope.document.bind("click",function(){scope.$apply("crsSigninBoxStatus = false")
}),element.bind("click",function(event){event.stopPropagation()})}}}),angular.module("confRegistrationWebApp").controller("EditAnswerDialogCtrl",["$scope","$modalInstance",function($scope,$modalInstance){$scope.originalAnswer=angular.copy($scope.answer),$scope.close=function(){$scope.$parent.answer=angular.copy($scope.originalAnswer),$modalInstance.close("")},$scope.submit=function(){$modalInstance.close()}}]),angular.module("confRegistrationWebApp").controller("AdminDataCtrl",["$scope","registrations","conference","$modal","permissions","$http","uuid",function($scope,registrations,conference,$modal,permissions,$http,uuid){$scope.conference=conference,$scope.blocks=[],$scope.reversesort=!1,$scope.showAllViewId="all",$scope.defaultViewId="default",$scope.activeRegViewId=$scope.showAllViewId,$scope.savedState="",registrations=_.filter(registrations,function(item){return item.completed!==!1}),angular.forEach(conference.registrationPages,function(page){angular.forEach(page.blocks,function(block){-1===block.type.indexOf("Content")&&(block.visible=!0,$scope.blocks.push(block))})}),$http({method:"GET",url:"conferences/"+conference.id+"/registration-views"}).success(function(data){$scope.registrationViews=_.sortBy(data,"name");var profileBlocks=function(blocks){return _.filter(blocks,function(block){var profileTypes=["EMAIL","NAME"];return profileTypes.indexOf(block.profileType)>-1})};$scope.registrationViewsDropdown=[{id:$scope.defaultViewId,name:"-Default-",visibleBlockIds:_.pluck(profileBlocks($scope.blocks),"id")},{id:$scope.showAllViewId,name:"-Show All-",visibleBlockIds:_.pluck($scope.blocks,"id")}],$scope.registrationViewsDropdown=$scope.registrationViewsDropdown.concat($scope.registrationViews),$scope.setRegView()}),$scope.toggleColumn=function(block){$scope.blocks[block].visible=!$scope.blocks[block].visible,$scope.updateRegView()},$scope.setRegView=function(){if($scope.savedState="",""===$scope.activeRegViewId);else{var visibleBlocks=_.find($scope.registrationViewsDropdown,{id:$scope.activeRegViewId}).visibleBlockIds;angular.forEach($scope.blocks,function(block){-1!==visibleBlocks.indexOf(block.id)?block.visible=!0:-1===block.type.indexOf("Content")&&(block.visible=!1)})}},$scope.createRegView=function(){$modal.open({templateUrl:"views/regViewCreate.html",controller:"CreateDialogCtrl",resolve:{defaultValue:function(){return""}}}).result.then(function(viewName){if(""!==viewName){var regViewNames=_.pluck($scope.registrationViewsDropdown,"name");if(regViewNames.indexOf(viewName)>-1){var errorModalOptions={templateUrl:"views/errorModal.html",controller:"genericModal",resolve:{message:function(){return'View name "'+viewName+'" already exists. Please provide a different view name.'}}};return void $modal.open(errorModalOptions)}var newView={id:uuid(),conferenceId:conference.id,name:viewName,visibleBlockIds:_.pluck(_.filter($scope.blocks,function(item){return item.visible===!0}),"id")};$http({method:"POST",url:"conferences/"+conference.id+"/registration-views",data:newView}).success(function(){$scope.registrationViews=$scope.registrationViews.concat(newView),$scope.registrationViewsDropdown=$scope.registrationViewsDropdown.concat(newView),$scope.activeRegViewId=newView.id}).error(function(){})}})},$scope.updateRegView=function(){if(!$scope.isPredefinedView($scope.activeRegViewId)){var thisView={id:$scope.activeRegViewId,conferenceId:conference.id,name:_.find($scope.registrationViewsDropdown,{id:$scope.activeRegViewId}).name,visibleBlockIds:_.pluck(_.filter($scope.blocks,function(item){return item.visible===!0}),"id")};$scope.savedState="Saving...",$http({method:"PUT",url:"registration-views/"+$scope.activeRegViewId,data:thisView}).success(function(){$scope.registrationViews=_.remove($scope.registrationViews,function(view){return view.id!==$scope.activeRegViewId}),$scope.registrationViewsDropdown=_.remove($scope.registrationViewsDropdown,function(view){return view.id!==$scope.activeRegViewId}),$scope.registrationViews=$scope.registrationViews.concat(thisView),$scope.registrationViewsDropdown=$scope.registrationViewsDropdown.concat(thisView),$scope.activeRegViewId=thisView.id,$scope.savedState="Saved"}).error(function(){})}},$scope.delRegView=function(){$scope.isPredefinedView($scope.activeRegViewId)||$http({method:"DELETE",url:"registration-views/"+$scope.activeRegViewId}).success(function(){$scope.registrationViews=_.remove($scope.registrationViews,function(view){return view.id!==$scope.activeRegViewId}),$scope.registrationViewsDropdown=_.remove($scope.registrationViewsDropdown,function(view){return view.id!==$scope.activeRegViewId}),$scope.activeRegViewId=$scope.defaultViewId,$scope.setRegView()}).error(function(){})},$scope.findAnswer=function(registration,blockId){return _.find(registration.answers,function(answer){return angular.equals(answer.blockId,blockId)})},$scope.getSelectedCheckboxes=function(choices){return _.keys(_.pick(choices,function(val){return val===!0}))},$scope.answerSort=function(registration){return angular.isDefined($scope.order)?angular.isDefined($scope.findAnswer(registration,$scope.order))?$scope.findAnswer(registration,$scope.order).value?$scope.findAnswer(registration,$scope.order).value:$scope.getSelectedCheckboxes($scope.findAnswer(registration,$scope.order).value).length>0?$scope.getSelectedCheckboxes($scope.findAnswer(registration,$scope.order).value).join(" "):"object"==typeof $scope.findAnswer(registration,$scope.order).value?_.values($scope.findAnswer(registration,$scope.order).value).join(" "):$scope.findAnswer(registration,$scope.order).value:void 0:0},$scope.setOrder=function(order){$scope.reversesort=order===$scope.order?!$scope.reversesort:!1,$scope.order=order},$scope.registrations=registrations,$scope.permissions=permissions,$scope.viewPayments=function(registration){var paymentModalOptions={templateUrl:"views/paymentsModal.html",controller:"paymentModal",backdrop:"static",keyboard:!1,resolve:{data:function(){return registration}}};$modal.open(paymentModalOptions).result.then(function(updatedRegistration){var localUpdatedRegistration=_.find(registrations,function(reg){return reg.id===updatedRegistration.id});localUpdatedRegistration.pastPayments=updatedRegistration.pastPayments,localUpdatedRegistration.totalDue=updatedRegistration.totalDue,localUpdatedRegistration.totalPaid=updatedRegistration.totalPaid,localUpdatedRegistration.remainingBalance=updatedRegistration.remainingBalance})},$scope.isPredefinedView=function(regViewId){var predefinedViews=[$scope.showAllViewId,$scope.defaultViewId];return predefinedViews.indexOf(regViewId)>-1},$scope.isConferenceCost=function(){return conference.conferenceCost>0},$scope.paymentCategories=[{name:"Show All",matches:function(){return!0}},{name:"Full",matches:function(x,y){return x===y}},{name:"Partial",matches:function(x,y){return x>0&&y>x}},{name:"Full/Partial",matches:function(x){return x>0}},{name:"Not Paid",matches:function(x){return null===x?!0:0>=x}}],$scope.currentPaymentCategory=_.first($scope.paymentCategories).name,$scope.paymentStatus=function(registration){var paymentCategory=_.find($scope.paymentCategories,{name:$scope.currentPaymentCategory});return paymentCategory.matches(registration.totalPaid,registration.totalDue)},$scope.paidInFull=function(registration){return registration.totalPaid>=registration.totalDue}}]),angular.module("confRegistrationWebApp").controller("AdminDetailsCtrl",["$scope","$timeout","Model","conference","ConfCache",function($scope,$timeout,Model,conference,ConfCache){Model.subscribe($scope,"conference","conferences/"+conference.id),$scope.$watch("conference",function(conf){angular.isDefined(conference)&&ConfCache.update(conference.id,conf)},!0)}]),angular.module("confRegistrationWebApp").controller("ReviewRegistrationCtrl",["$scope","$rootScope","$location","registration","conference","$modal","$http","RegistrationCache",function($scope,$rootScope,$location,registration,conference,$modal,$http,RegistrationCache){function setRegistrationAsCompleted(){registration.completed=!0,_.isNull(registration.totalDue)&&(registration.totalDue=$rootScope.totalDue),$http.put("registrations/"+registration.id,registration).success(function(){$scope.registration.completed=!0}).error(function(data){alert("Error: "+data)})}$scope.conference=conference,$scope.registration=registration,$scope.answers=registration.answers,$scope.blocks=[],angular.forEach(conference.registrationPages,function(page){angular.forEach(page.blocks,function(block){-1===block.type.indexOf("Content")&&$scope.blocks.push(block)})}),$scope.findAnswer=function(blockId){return _.find($scope.answers,{blockId:blockId})},$scope.confirmRegistration=function(){if($(".btn-success").attr("value","Loading..."),!conference.acceptCreditCards)return void setRegistrationAsCompleted();var currentPayment=$rootScope.currentPayment;currentPayment.readyToProcess=!0,$http.post("payments/",currentPayment).success(function(){setRegistrationAsCompleted(),delete $rootScope.currentPayment,RegistrationCache.emptyCache()}).error(function(){var errorModalOptions={templateUrl:"views/errorModal.html",controller:"genericModal",backdrop:"static",keyboard:!1,resolve:{data:function(){return"Your card was declined, please verify and re-enter your details or use a different card."}}};$modal.open(errorModalOptions).result.then(function(){$location.path("/payment/"+conference.id)})})},$scope.editRegistration=function(){$location.path("/"+$rootScope.registerMode+"/"+conference.id+"/page/"+conference.registrationPages[0].id)},$scope.editPayment=function(){$location.path("/payment/"+conference.id)}}]),angular.module("confRegistrationWebApp").directive("formElements",function(){return{restrict:"A",link:function(scope){var newDragBlock="";$(".connectedSortable").sortable({connectWith:".connectedSortable",placeholder:"crs-dragBack",stop:function(event,ui){""!==newDragBlock?(scope.insertBlock(newDragBlock,ui.item.parent().attr("id"),ui.item.index(),ui.item[0].innerText,ui.item.attr("default-profile")),ui.item.remove()):scope.moveBlock(ui.item.find(".crsQuestion").attr("id"),ui.item.parent().attr("id"),ui.item.index())}}),$(".crs-accordionSub li").draggable({connectToSortable:".connectedSortable",helper:"clone",revert:"invalid",addClasses:!1,appendTo:"body",start:function(){newDragBlock=$(this).attr("id")},stop:function(){newDragBlock=""}}).disableSelection()}}}),angular.module("confRegistrationWebApp").directive("accordionSub",function(){return{restrict:"A"}}).directive("scrollPosition",["$window",function($window){return function(scope){var windowEl=angular.element($window);windowEl.on("scroll",function(){scope.$apply(function(){var returnTop;returnTop=windowEl.scrollTop()>130?windowEl.scrollTop()-90:0,scope.scrollStyle=function(){return{marginTop:returnTop+"px"}}})})}}]),angular.module("confRegistrationWebApp").controller("AdminWizardCtrl",["$scope","$modal","conference","Model","GrowlService","ConfCache",function($scope,$modal,conference,Model,GrowlService,ConfCache){Model.subscribe($scope,"conference","conferences/"+conference.id),$scope.$watch("conference",function(conf){angular.isDefined(conference)&&ConfCache.update(conference.id,conf)},!0),$scope.deletePage=function(pageId,growl){if(growl){var page=_.find($scope.conference.registrationPages,{id:pageId}),message='Page "'+page.title+'" has been deleted.';GrowlService.growl("conferences/"+$scope.conference.id,$scope.conference,message)}$scope.deletePageFromConf(pageId)},$scope.deletePageFromConf=function(pageId){var delPageIndex=_.findIndex($scope.conference.registrationPages,{id:pageId});$scope.conference.registrationPages.splice(delPageIndex,1)}}]),angular.module("confRegistrationWebApp").service("AnswerCache",["$cacheFactory","$rootScope","$http","$q",function($cacheFactory,$rootScope,$http,$q){var cache=$cacheFactory("answers"),blockIndex=$cacheFactory("blockIndex"),path=function(id){return"answers/"+(id||"")},update=function(path,object){updateServer(object),cache.put(path,object),blockIndex.put(object.block,object),$rootScope.$broadcast(path,object)},updateServer=function(answer){"preview"!==$rootScope.registerMode&&$http.put(path(answer.id),answer)},checkCache=function(path,callback){var cachedObject=cache.get(path);angular.isDefined(cachedObject)?callback(cachedObject,path):$http.get(path).success(function(conferences){cache.put(path,conferences),callback(conferences,path)})};this.query=function(id){checkCache(path(id),function(conferences,path){$rootScope.$broadcast(path,conferences)})},this.get=function(id){var defer=$q.defer();return checkCache(path(id),function(conferences){defer.resolve(conferences)}),defer.promise},this.put=function(answer){cache.put(path(answer.id),answer)},this.syncBlock=function(scope,name){scope.$watch(name,function(answer){angular.isDefined(answer)&&update(path(answer.id),answer)},!0)}}]),angular.module("confRegistrationWebApp").service("RegistrationCache",["$cacheFactory","$rootScope","$http","$q","AnswerCache",function($cacheFactory,$rootScope,$http,$q,AnswerCache){var cache=$cacheFactory("registration"),path=function(id){return"registrations/"+(id||"")},update=function(path,object){cache.put(path,angular.copy(object)),$rootScope.$broadcast(path,object)},checkCache=function(path,callback){var cachedObject=cache.get(path);angular.isDefined(cachedObject)?callback(cachedObject,path):$http.get(path).success(function(data){"preview"===$rootScope.registerMode&&(data.completed=!1,data.answers=[]),update(path,data),callback(data,path)})};this.update=function(path,registration,cb,errorCallback){var callback=cb||function(){cache.put(path,angular.copy(registration)),$rootScope.broadcast(path,registration)},cachedReg=cache.get(path);angular.equals(registration,cachedReg)||"preview"!==$rootScope.registerMode&&$http.put(path,registration).then(callback,errorCallback)},this.query=function(id){checkCache(path(id),function(conferences,path){$rootScope.$broadcast(path,conferences)})},this.emptyCache=function(){cache.removeAll()},this.get=function(id){var defer=$q.defer();return checkCache(path(id),defer.resolve),defer.promise},this.getCurrent=function(conferenceId){var defer=$q.defer();return $rootScope.clearRegCache&&(this.emptyCache(),$rootScope.clearRegCache=!1),checkCache("conferences/"+conferenceId+"/registrations/current",function(registration){update(path(registration.id),registration),angular.forEach(registration.answers,AnswerCache.put),defer.resolve(registration)}),defer.promise},this.getAllForConference=function(conferenceId){var defer=$q.defer();return checkCache("conferences/"+conferenceId+"/registrations",function(registrations){angular.forEach(registrations,function(registration){update(path(registration.id),registration)}),defer.resolve(registrations)}),defer.promise}}]),angular.module("confRegistrationWebApp").service("ConfCache",["$cacheFactory","$rootScope","$http","$q","uuid",function($cacheFactory,$rootScope,$http,$q,uuid){var cache=$cacheFactory("conf"),path=function(id){return"conferences/"+(id||"")},checkCache=function(path,callback){var cachedConferences=cache.get(path);angular.isDefined(cachedConferences)?callback(cachedConferences,path):$http.get(path).success(function(conferences){cache.put(path,conferences),callback(conferences,path)})};this.query=function(id){checkCache(path(id),function(conferences,path){$rootScope.$broadcast(path,conferences)})},this.get=function(id){var defer=$q.defer();return checkCache(path(id),function(conferences){defer.resolve(conferences)}),defer.promise},this.update=function(id,conference){cache.put(path(id),conference)},this.create=function(name){var registrationEndTime=new Date;registrationEndTime.setYear(registrationEndTime.getFullYear()+1);var newConferenceId=uuid(),newPageId=uuid(),data={id:newConferenceId,name:name,registrationStartTime:new Date,registrationEndTime:registrationEndTime,contactPersonName:"",registrationPages:[{id:newPageId,conferenceId:newConferenceId,title:"Your Information",position:0,blocks:[{id:uuid(),pageId:newPageId,type:"nameQuestion",profileType:"NAME",title:"Name",position:0,required:!0},{id:uuid(),pageId:newPageId,type:"emailQuestion",title:"Email Address",profileType:"EMAIL",position:1,required:!0}]}]};return $http.post(path(),data).then(function(response){if(201===response.status){var conference=response.data;return cache.put(path(conference.id),conference),conference}alert("Error creating conference. "+response.data.errorMessage+": "+response.data.customErrorMessage)})}}]),angular.module("confRegistrationWebApp").service("ProfileCache",["$cacheFactory","$rootScope","$http","$q",function($cacheFactory,$rootScope,$http,$q){var cache=$cacheFactory("profile"),path="/profile",checkCache=function(path,callback){var cachedObject=cache.get(path);angular.isDefined(cachedObject)?callback(cachedObject,path):$http.get(path).success(function(profileData){cache.put(path,profileData),callback(profileData,path)})};this.get=function(){var defer=$q.defer();return checkCache(path,function(profileData){defer.resolve(profileData)}),defer.promise},this.getCache=function(callback){checkCache(path,function(profileData){callback(profileData)})}}]),angular.module("confRegistrationWebApp").controller("CreateDialogCtrl",["$scope","ConfCache","$modalInstance","defaultValue",function($scope,ConfCache,$modalInstance,defaultValue){$scope.name=defaultValue,$scope.close=function(){$modalInstance.close("")},$scope.submit=function(newConfName){$modalInstance.close(newConfName)}}]),angular.module("confRegistrationWebApp").controller("confirmCtrl",["$scope","ConfCache","$modalInstance",function($scope,ConfCache,$modalInstance){$scope.close=function(){$modalInstance.close(!1)},$scope.submit=function(){$modalInstance.close(!0)}}]),angular.module("confRegistrationWebApp").controller("confirmPromptCtrl",["$scope","$modalInstance",function($scope,$modalInstance){$scope.close=function(){$modalInstance.close("")},$scope.submit=function(newPageName){$modalInstance.close(newPageName)}}]),angular.module("confRegistrationWebApp").directive("ngEnter",function(){return function(scope,element,attrs){element.bind("keypress",function(event){13===event.which&&(scope.$apply(function(){scope.$eval(attrs.ngEnter)}),event.preventDefault())})}}),angular.module("confRegistrationWebApp").controller("FormDropAreaCtrl",["$rootScope","$scope","$modal","uuid","GrowlService",function($rootScope,$scope,$modal,uuid,GrowlService){function makePositionArray(){var tempPositionArray=[];return $scope.conference.registrationPages.forEach(function(page,pageIndex){page.blocks.forEach(function(block,blockIndex){tempPositionArray[block.id]={page:pageIndex,block:blockIndex}})}),tempPositionArray}$scope.$on("dragVars",function(event,x){$scope.blockId=x.blockId,$scope.moveType=x.moveType}),$scope.moveBlock=function(blockId,newPage,newPosition){var tempPositionArray=makePositionArray(),newPageIndex=_.findIndex($scope.conference.registrationPages,{id:newPage}),origPageIndex=tempPositionArray[blockId].page,origBlock=$scope.conference.registrationPages[origPageIndex].blocks[tempPositionArray[blockId].block];origBlock.pageId=newPage,$scope.$apply(function(scope){scope.deleteBlock(blockId,!1),scope.conference.registrationPages[newPageIndex].blocks.splice(newPosition,0,origBlock)})},$scope.insertBlock=function(blockType,newPage,newPosition,title,defaultProfile){var newPageIndex=_.findIndex($scope.conference.registrationPages,{id:newPage}),profileType=null;if(angular.isDefined(defaultProfile)){var profileCount=0;$scope.conference.registrationPages.forEach(function(page){page.blocks.forEach(function(block){defaultProfile===block.profileType&&profileCount++})}),0===profileCount&&(profileType=defaultProfile)}var newBlock={id:uuid(),content:"",pageId:newPage,required:!1,title:title,type:blockType,profileType:profileType};$scope.$apply(function(){$scope.conference.registrationPages[newPageIndex].blocks.splice(newPosition,0,newBlock)})},$scope.deleteBlock=function(blockId,growl){if(growl){var t=makePositionArray(),block=$scope.conference.registrationPages[t[blockId].page].blocks[t[blockId].block],message='"'+block.title+'" has been deleted.';GrowlService.growl("conferences/"+$scope.conference.id,$scope.conference,message)}$scope.deleteBlockFromPage(blockId)},$scope.deleteBlockFromPage=function(blockId){var tempPositionArray=makePositionArray();$scope.conference.registrationPages[tempPositionArray[blockId].page].blocks.splice(tempPositionArray[blockId].block,1)},$scope.addNewPage=function(){$modal.open({templateUrl:"views/promptNewPage.html",controller:"confirmPromptCtrl"}).result.then(function(pageTitle){null===pageTitle||""===pageTitle||angular.isUndefined(pageTitle)||$scope.conference.registrationPages.push({id:uuid(),conferenceId:$scope.conference.id,position:0,title:pageTitle,blocks:[]})})}}]),angular.module("confRegistrationWebApp").constant("enforceAuth",function($route,$modal,$cookies,$q,$window,apiUrl,$http){var defer=$q.defer(),noAuthControllers=["RegistrationCtrl","paymentCtrl","ReviewRegistrationCtrl"],loginDialogOptions={templateUrl:"views/loginDialog.html",controller:"LoginDialogCtrl",backdrop:"static",keyboard:!1};return noAuthControllers.indexOf($route.current.$$route.controller)>=0?angular.isDefined($cookies.crsToken)&&""!==$cookies.crsToken?defer.resolve("Authorization present."):$http.get("conferences/"+$route.current.params.conferenceId).success(function(conference){conference.requireLogin?$modal.open(loginDialogOptions):$window.location.href=apiUrl+"auth/none/login"}):angular.isDefined($cookies.crsToken)&&""!==$cookies.crsToken&&"NONE"!==$cookies.crsAuthProviderType?defer.resolve("Authorization present."):$modal.open(loginDialogOptions),defer.promise}),angular.module("confRegistrationWebApp").controller("LoginDialogCtrl",["$scope","$window","apiUrl",function($scope,$window,apiUrl){$scope.apiUrl=apiUrl,$scope.submit=function(email){$window.location.href=apiUrl+"auth/none/login?email="+email}}]),angular.module("confRegistrationWebApp").directive("showAnswer",["AnswerCache","$modal","$location","uuid",function(AnswerCache,$modal,$location,uuid){return{templateUrl:"views/adminAnswerDisplay.html",restrict:"E",scope:{block:"=",registration:"="},controller:["$scope",function($scope){-1!==$location.$$path.indexOf("adminData/")&&($scope.answerEditable=!0);var editAnswerDialogOptions={templateUrl:"views/editAnswer.html",controller:"EditAnswerDialogCtrl",scope:$scope};$scope.createEditDialog=function(){$scope.answerEditable&&(angular.isUndefined($scope.answer)&&($scope.answer={id:uuid(),registrationId:$scope.registration.id,blockId:$scope.block.id,value:null}),$modal.open(editAnswerDialogOptions).result.then(function(){AnswerCache.syncBlock($scope,"answer")}))},$scope.$watch("answers",function(){if($scope.registration.answers){var answerObject=_.find($scope.registration.answers,{blockId:$scope.block.id});answerObject&&($scope.answer=answerObject)}}),$scope.getSelectedCheckboxes=function(choices){return _.keys(_.pick(choices,function(val){return val===!0}))}}]}}]),angular.module("confRegistrationWebApp").filter("joiner",function(){return function(input,separator){return angular.isArray(input)?input.join(separator||", "):input}}),angular.module("confRegistrationWebApp").service("Model",["$cacheFactory","$rootScope","$http","$q",function($cacheFactory,$rootScope,$http,$q){var cache=$cacheFactory("cache"),thisModel=this;this.create=function(path,object){return $http.post(path,object).then(function(response){var createdObjectPath=response.headers("Location"),createdObject=response.data;return cache.put(createdObjectPath,createdObject),cache.get(path)&&thisModel.get(path).then(function(parentCollection){parentCollection.push(createdObject),cache.put(path,parentCollection),$rootScope.$broadcast(path,parentCollection)}),angular.copy(createdObject)})},this.get=function(path){return cache.get(path)?$q.when(angular.copy(cache.get(path))):$http.get(path).then(function(response){return cache.put(path,response.data),angular.copy(response.data)})},this.delete=function(path){$http.delete(path).then(function(){cache.remove(path),$rootScope.$broadcast(path);var match=/\/?(.*\/)(.+)$/.exec(path),parentPath=match[1],removedObjectId=match[2];cache.get(parentPath)&&thisModel.get(parentPath).then(function(oldParentCollection){var parentCollection=_.reject(oldParentCollection,{id:removedObjectId});cache.put(parentPath,parentCollection),$rootScope.$broadcast(parentPath,parentCollection)})})},this.subscribe=function(scope,name,path){scope.$watch(name,function(object){if(angular.isDefined(object)){var cb=function(){cache.put(path,angular.copy(object)),$rootScope.$broadcast(path,object,scope.$id)};thisModel.update(path,object,cb)}},!0),scope.$on(path,function(event,object,originScopeId){scope.$id!==originScopeId&&(scope[name]=angular.copy(object))}),thisModel.get(path).then(function(object){scope[name]=angular.copy(object)})},this.update=function(path,object,cb){var callback=cb||function(){cache.put(path,angular.copy(object)),$rootScope.$broadcast(path,object)};angular.equals(object,cache.get(path))||$http.put(path,object).then(callback)}}]),angular.module("confRegistrationWebApp").controller("ConferenceCardCtrl",["$scope","$rootScope",function($scope,$rootScope){$scope.$on("flipevent",function(event,idToFlip){$scope.flip=$scope.$id!==idToFlip||$scope.flip?"":"js-flip"}),$scope.flipCard=function(){$rootScope.$broadcast("flipevent",$scope.$id)}}]),angular.module("confRegistrationWebApp").directive("body",function(){var matchRouteToClass={};return matchRouteToClass["/$"]="page--home",matchRouteToClass["/wizard/*."]="page--wizard",matchRouteToClass["/adminData/*."]="page--admin",matchRouteToClass["/register/*.*/page/*.*"]="page--register",matchRouteToClass["/adminDetails/*."]="page--admin-details",{restrict:"E",link:function(scope,element){scope.$on("$locationChangeSuccess",function(event,location){angular.forEach(matchRouteToClass,function(cssClass,regExpString){element.removeClass(cssClass),new RegExp(regExpString).test(location)&&element.addClass(cssClass)})})}}}),angular.module("confRegistrationWebApp").directive("crsDatetimepicker",function(){return{templateUrl:"views/datepicker.html",restrict:"E",scope:{localModel:"=model"},controller:["$timeout","$scope",function($timeout,$scope){$scope.showWeeks=!1,$scope.minDate=$scope.minDate?null:new Date,$scope.dateOptions={"starting-day":0},$scope.open=function(){$timeout(function(){$scope.opened=!0})}}]}}),angular.module("confRegistrationWebApp").directive("formDropArea",function(){return{restrict:"A",controller:"FormDropAreaCtrl"}}),angular.module("confRegistrationWebApp").controller("paymentCtrl",["$scope","$rootScope","$location","registration","conference","$http","$modal","RegistrationCache",function($scope,$rootScope,$location,registration,conference,$http,$modal,RegistrationCache){$scope.currentYear=(new Date).getFullYear(),registration.completed?(registration.remainingBalance=registration.totalDue,registration.pastPayments.forEach(function(payment){registration.remainingBalance-=payment.amount}),$scope.amount=registration.remainingBalance,conference.conferenceCost=$scope.amount):(conference.conferenceCost=conference.earlyRegistrationOpen?conference.conferenceCost-conference.earlyRegistrationAmount:conference.conferenceCost,$rootScope.totalDue=conference.conferenceCost,$scope.amount=conference.minimumDeposit),$scope.currentRegistration=registration,$scope.conference=conference,$scope.createPayment=function(){var errorModalOptions={};if(!$scope.creditCardNameOnCard)return errorModalOptions={templateUrl:"views/errorModal.html",controller:"genericModal",resolve:{data:function(){return"Please enter the name on your card."}}},void $modal.open(errorModalOptions);if(!$scope.creditCardNumber)return errorModalOptions={templateUrl:"views/errorModal.html",controller:"genericModal",resolve:{data:function(){return"Please enter your card number."}}},void $modal.open(errorModalOptions);if(!$scope.creditCardExpirationMonth||!$scope.creditCardExpirationYear)return errorModalOptions={templateUrl:"views/errorModal.html",controller:"genericModal",resolve:{data:function(){return"Please enter card expiration date."}}},void $modal.open(errorModalOptions);if($rootScope.currentPayment={},$rootScope.currentPayment.amount=$scope.amount,$rootScope.currentPayment.registrationId=registration.id,$rootScope.currentPayment.creditCard={},$rootScope.currentPayment.creditCard.nameOnCard=$scope.creditCardNameOnCard,$rootScope.currentPayment.creditCard.expirationMonth=$scope.creditCardExpirationMonth,$rootScope.currentPayment.creditCard.expirationYear=$scope.creditCardExpirationYear,$rootScope.currentPayment.creditCard.number=$scope.creditCardNumber,$rootScope.currentPayment.creditCard.cvvNumber=$scope.creditCardCVVNumber,$rootScope.currentPayment.paymentType="CREDIT_CARD",registration.completed){var currentPayment=$rootScope.currentPayment;currentPayment.readyToProcess=!0,$http.post("payments/",currentPayment).success(function(){RegistrationCache.emptyCache(),$location.path("/register/"+conference.id)}).error(function(){var errorModalOptions={templateUrl:"views/errorModal.html",controller:"genericModal",backdrop:"static",keyboard:!1,resolve:{data:function(){return"Your card was declined, please verify and re-enter your details or use a different card."}}};$modal.open(errorModalOptions).result.then(function(){})})}else $location.path("/reviewRegistration/"+conference.id)}}]),angular.module("confRegistrationWebApp").directive("adminNav",["$http","RegistrationCache","ConfCache","RegistrationsViewService","PaymentsViewService","ConferenceHelper","U","apiUrl",function($http,RegistrationCache,ConfCache,RegistrationsViewService,PaymentsViewService,ConferenceHelper,U,apiUrl){return{templateUrl:"views/adminNav.html",restrict:"A",controller:["$scope","$modal",function($scope,$modal){$scope.deleteConference=function(conferenceToDelete){$modal.open({templateUrl:"views/confirmDeleteConf.html",controller:"confirmCtrl"}).result.then(function(result){result&&alert("delete "+conferenceToDelete)})},$scope.registerUser=function(conferenceId){var registrationModalOptions={templateUrl:"views/registrationModal.html",controller:"registrationModal",backdrop:"static",keyboard:!1,resolve:{conference:["ConfCache",function(ConfCache){return ConfCache.get(conferenceId)}]}};$modal.open(registrationModalOptions)},$scope.exportRegistrations=function(conferenceId){ConfCache.get(conferenceId).then(function(conference){RegistrationCache.getAllForConference(conferenceId).then(function(registrations){var table=RegistrationsViewService.getTable(conference,registrations),csvContent=U.stringifyArray(table,","),url=apiUrl+"services/download/registrations/"+conference.name+"-registrations.csv";U.submitForm(url,{name:csvContent})})})},$scope.exportPayments=function(conferenceId){ConfCache.get(conferenceId).then(function(conference){RegistrationCache.getAllForConference(conferenceId).then(function(registrations){var table=PaymentsViewService.getTable(conference,registrations),csvContent=U.stringifyArray(table,","),url=apiUrl+"services/download/payments/"+conference.name+"-payments.csv";U.submitForm(url,{name:csvContent})})})},$scope.hasCost=function(conference){return ConferenceHelper.hasCost(conference)}}]}}]),angular.module("confRegistrationWebApp").controller("AdminPermissionsCtrl",["$scope","conference","$http",function($scope,conference,$http){$scope.conference=conference;var getPermissions=function(){$http({method:"GET",url:"conferences/"+conference.id+"/permissions"}).success(function(data){$scope.currentPermissions=data}).error(function(){})};getPermissions(),$scope.updatePermission=function(id){$http({method:"PUT",url:"permissions/"+id,data:_.find($scope.currentPermissions,{id:id})}).success(function(){}).error(function(){})},$scope.addPermission=function(){var postData={conferenceId:conference.id,emailAddress:$scope.addPermissionsEmail,permissionLevel:$scope.addPermissionsLevel};$http({method:"POST",url:"conferences/"+conference.id+"/permissions",data:postData}).success(function(){getPermissions(),$scope.addPermissionsEmail="",$scope.addPermissionsLevel=""
}).error(function(){})},$scope.deletePermission=function(id){$http({method:"DELETE",url:"permissions/"+id}).success(function(){getPermissions()}).error(function(){})}}]),angular.module("confRegistrationWebApp").controller("ActiviatePermissionCtrl",["$scope","$route","$http","$location","$timeout",function($scope,$route,$http,$location,$timeout){var permissionAuthCode=$route.current.params.permissionAuthCode;$scope.message="Verifying Auth Code...",$http({method:"PUT",url:"permissions/"+permissionAuthCode+"/accept",data:"{}"}).success(function(){$scope.message="Success! Permission has been granted.  Redirecting now...",$timeout(function(){$location.path("/")},2e3)}).error(function(data,status){404===status?$scope.message="Error: Permission auth code was not found.":403===status&&($scope.message="Error: Permission auth code has already been used or is more than 2 months old.")})}]),angular.module("confRegistrationWebApp").directive("nameQuestion",function(){return{templateUrl:"views/blocks/nameQuestion.html",restrict:"E"}}),angular.module("confRegistrationWebApp").directive("addressQuestion",function(){return{templateUrl:"views/blocks/addressQuestion.html",restrict:"E"}}),angular.module("confRegistrationWebApp").directive("checkboxQuestion",function(){return{templateUrl:"views/blocks/checkboxQuestion.html",restrict:"E",controller:["$scope",function($scope){$scope.wizard&&($scope.answer={value:{}})}]}}),angular.module("confRegistrationWebApp").directive("emailQuestion",function(){return{templateUrl:"views/blocks/emailQuestion.html",restrict:"E"}}),angular.module("confRegistrationWebApp").directive("numberQuestion",function(){return{templateUrl:"views/blocks/numberQuestion.html",restrict:"E"}}),angular.module("confRegistrationWebApp").directive("phoneQuestion",function(){return{templateUrl:"views/blocks/phoneQuestion.html",restrict:"E"}}),angular.module("confRegistrationWebApp").directive("radioQuestion",function(){return{templateUrl:"views/blocks/radioQuestion.html",restrict:"E"}}),angular.module("confRegistrationWebApp").directive("selectQuestion",function(){return{templateUrl:"views/blocks/selectQuestion.html",restrict:"E"}}),angular.module("confRegistrationWebApp").directive("textQuestion",function(){return{templateUrl:"views/blocks/textQuestion.html",restrict:"E"}}),angular.module("confRegistrationWebApp").directive("genderQuestion",function(){return{templateUrl:"views/blocks/genderQuestion.html",restrict:"E"}}),angular.module("confRegistrationWebApp").service("PermissionCache",["$cacheFactory","$rootScope","$http","$q",function($cacheFactory,$rootScope,$http,$q){var cache=$cacheFactory("permission"),path=function(conferenceId){return"conferences/"+conferenceId+"/permissions/current"},update=function(path,object){cache.put(path,object),$rootScope.$broadcast(path,object)},checkCache=function(path,callback){var cachedObject=cache.get(path);angular.isDefined(cachedObject)?callback(cachedObject,path):$http.get(path).success(function(data){update(path,data),callback(data,path)})};this.getForConference=function(conferenceId){var defer=$q.defer();return checkCache(path(conferenceId),defer.resolve),defer.promise}}]),angular.module("confRegistrationWebApp").directive("totalDue",["$modal",function($modal){return{templateUrl:"views/totalDue.html",restrict:"E",scope:{registration:"=",permissions:"="},controller:["$scope",function($scope){$scope.canEdit="CREATOR"===$scope.permissions.permissionLevel||"UPDATE"===$scope.permissions.permissionLevel;var editTotalDueDialogOptions={templateUrl:"views/editTotalDue.html",controller:"EditTotalDueDialogCtrl",scope:$scope};$scope.createEditDialog=function(){$scope.canEdit&&$modal.open(editTotalDueDialogOptions).result.then(function(){})}}]}}]),angular.module("confRegistrationWebApp").controller("EditTotalDueDialogCtrl",["$scope","RegistrationCache","$modalInstance",function($scope,RegistrationCache,$modalInstance){$scope.originalTotalDue=$scope.registration.totalDue,$scope.close=function(){$scope.registration.totalDue=$scope.originalTotalDue,$modalInstance.close("")},$scope.submit=function(){RegistrationCache.update("registrations/"+$scope.registration.id,$scope.registration),$modalInstance.close()}}]),angular.module("confRegistrationWebApp").controller("genericModal",["$scope","$modalInstance","data",function($scope,$modalInstance,data){$scope.data=data,$scope.close=function(){$modalInstance.close("")}}]),angular.module("confRegistrationWebApp").controller("paymentModal",["$scope","$modalInstance","$http","data","RegistrationCache",function($scope,$modalInstance,$http,data,RegistrationCache){$scope.registration=data,$scope.currentYear=(new Date).getFullYear(),$scope.close=function(){$modalInstance.close($scope.registration)},$scope.newPayment={registrationId:$scope.registration.id},$scope.processPayment=function(){$scope.newPayment.readyToProcess=!0,$http.post("payments/",$scope.newPayment).success(function(){$http.get("registrations/"+$scope.registration.id).success(function(data){RegistrationCache.update("registrations/"+data.id,data,function(){}),$scope.registration=data}),delete $scope.newPayment,$scope.newPayment={registrationId:$scope.registration.id}}).error(function(){alert("payment failed...")})},$scope.canBeRefunded=function(payment){var sum=0;return _.each($scope.registration.pastPayments,function(prevRefund){"CREDIT_CARD_REFUND"!==prevRefund.paymentType&&"REFUND"!==prevRefund.paymentType||prevRefund.refundedPaymentId!==payment.id||(sum+=prevRefund.amount)}),"CREDIT_CARD_REFUND"!==payment.paymentType&&"REFUND"!==payment.paymentType&&sum<payment.amount},$scope.refund=function(payment){var refund;refund="CREDIT_CARD"===payment.paymentType?{amount:payment.amount,refundedPaymentId:payment.id,registrationId:payment.registrationId,paymentType:"CREDIT_CARD_REFUND",creditCard:{lastFourDigits:payment.creditCard.lastFourDigits},readyToProcess:!0}:{amount:payment.amount,refundedPaymentId:payment.id,registrationId:payment.registrationId,paymentType:"REFUND",readyToProcess:!0},$http.post("payments/",refund).success(function(){$http.get("registrations/"+$scope.registration.id).success(function(data){RegistrationCache.update("registrations/"+data.id,data,function(){}),$scope.registration=data})}).error(function(){alert("refund failed...")})},$scope.updateCost=function(){$scope.registration.totalDue=$scope.updateCost.newTotal,RegistrationCache.update("registrations/"+$scope.registration.id,$scope.registration,function(){$scope.updateCost.show=!1},function(){alert("error updating total cost")})}}]),angular.module("confRegistrationWebApp").controller("registrationModal",["$scope","$modalInstance","$http","$route","conference","uuid","RegistrationCache",function($scope,$modalInstance,$http,$route,conference,uuid,RegistrationCache){$scope.form={},$scope.register=function(){var registration={};registration.id=uuid(),registration.conferenceId=conference.id,registration.completed=!0,registration.answers=[],registration.pastPayments=[],angular.forEach(conference.registrationPages,function(registrationPage){angular.forEach(registrationPage.blocks,function(block){if("EMAIL"===block.profileType||"NAME"===block.profileType){var answer={id:uuid(),registrationId:registration.id,blockId:block.id,value:{}};"EMAIL"===block.profileType?answer.value=$scope.form.email:"NAME"===block.profileType&&(answer.value={firstName:$scope.form.first,lastName:$scope.form.last}),registration.answers.push(answer)}})}),$http.post("conferences/"+conference.id+"/registrations",registration,{headers:{"Registration-Type":"on-behalf-of"}}).success(function(){RegistrationCache.emptyCache(),$route.reload()}).error(function(data){console.log("Error: "+data)}),$modalInstance.close()},$scope.close=function(){$modalInstance.close()}}]),angular.module("confRegistrationWebApp").service("RegistrationsViewService",["ConferenceHelper","U",function(ConferenceHelper,U){this.getTable=function(conference,registrations){var table=[],header=getHeader(conference);table.push(header);var rows=getRows(conference,registrations);return U.sortArrayByIndex(rows,_.findIndex(header,function(string){return angular.equals(string,"Last")})),table.push.apply(table,rows),table};var getHeader=function(conference){var blocks=ConferenceHelper.getPageBlocks(conference.registrationPages),header=getBlockTitles(blocks);return ConferenceHelper.hasCost(conference)&&header.push("Conference Cost"),header},getRows=function(conference,registrations){var rows=[],blocks=ConferenceHelper.getPageBlocks(conference.registrationPages);return ConferenceHelper.getCompletedRegistrations(registrations).forEach(function(registration){var row=[];angular.forEach(blocks,function(block){var answer=ConferenceHelper.findAnswerByBlockId(registration.answers,block.id),content=ConferenceHelper.getContentByBlockType(U.isEmpty(answer)?answer:answer.value,block.type);row.push.apply(row,content)}),ConferenceHelper.hasCost(conference)&&row.push("$"+U.getValue(registration.totalDue,"0")),rows.push(row)}),rows},getBlockTitles=function(blocks){var titles=[];return angular.forEach(blocks,function(block){"nameQuestion"===block.type?(titles.push("First"),titles.push("Last")):"addressQuestion"===block.type?(titles.push("Address1"),titles.push("Address2"),titles.push("City"),titles.push("State"),titles.push("Zip")):titles.push(block.title)}),titles}}]),angular.module("confRegistrationWebApp").service("PaymentsViewService",["ConferenceHelper","U",function(ConferenceHelper,U){this.getTable=function(conference,registrations){var table=[],header=getHeader();table.push(header);var rows=getRows(conference,registrations);return U.sortArrayByIndex(rows,_.findIndex(header,function(string){return angular.equals(string,"Last")})),table.push.apply(table,rows),table};var getHeader=function(){var header=[];return header.push("First"),header.push("Last"),header.push("Conference Cost"),header.push("Payment"),header.push("Type"),header.push("Date"),header},getRows=function(conference,registrations){var rows=[],blocks=ConferenceHelper.getPageBlocks(conference.registrationPages);return ConferenceHelper.getCompletedRegistrations(registrations).forEach(function(registration){var name=ConferenceHelper.getRegistrantName(registration.answers,blocks),totalDue="$"+U.getValue(registration.totalDue,"0");if(registration.pastPayments.length<=0){var row=[];row.push.apply(row,name),row.push(totalDue),rows.push(row)}else angular.forEach(registration.pastPayments,function(payment){var row=[];row.push.apply(row,name),row.push(totalDue),row.push("$"+U.getValue(payment.amount,"0")),row.push(U.getValue(payment.paymentType)),row.push(U.getDate(payment.transactionDatetime)),rows.push(row)})}),rows}}]),angular.module("confRegistrationWebApp").service("ConferenceHelper",["U",function(U){this.getCompletedRegistrations=function(registrations){return _.filter(registrations,function(item){return item.completed!==!1})},this.hasCost=function(conference){return conference.conferenceCost&&conference.conferenceCost>0},this.getContentByBlockType=function(value,type){if(U.isEmpty(value)){var content=[];return angular.equals(type,"nameQuestion")?content.push(""):angular.equals(type,"addressQuestion")&&(content.push(""),content.push(""),content.push(""),content.push("")),content.push(""),content}return _getContentByBlockType(value,type)};var _getContentByBlockType=function(value,type){var content=[];return angular.equals(type,"nameQuestion")?(content.push(window.S(U.getValue(value.firstName)).capitalize()),content.push(window.S(U.getValue(value.lastName)).capitalize())):angular.equals(type,"emailQuestion")?content.push(U.getValue(value)):angular.equals(type,"textQuestion")?content.push(U.getValue(value)):angular.equals(type,"checkboxQuestion")?content.push(U.joiner(U.getValue(U.getKeysWhere(value,!0))," ")):angular.equals(type,"phoneQuestion")?content.push(U.getValue(value)):angular.equals(type,"radioQuestion")?content.push(U.getValue(value)):angular.equals(type,"selectQuestion")?content.push(U.getValue(value)):angular.equals(type,"numberQuestion")?content.push(U.getValue(value)):angular.equals(type,"addressQuestion")&&(content.push(U.getValue(value.address1)),content.push(U.getValue(value.address2)),content.push(U.getValue(value.city)),content.push(U.getValue(value.state)),content.push(U.getValue(value.zip))),content};this.getRegistrantName=function(answers,blocks){var answer=this.findAnswerByBlockType(answers,blocks,"nameQuestion","NAME");return this.getContentByBlockType(U.isEmpty(answer)?answer:answer.value,"nameQuestion")},this.findAnswerByBlockType=function(answers,blocks,blockType,profileType){var block=this.findBlockByType(blocks,blockType,profileType);return U.isEmpty(block)?(block=this.findBlockByType(blocks,blockType),U.isEmpty(block)?null:this.findAnswerByBlockId(answers,block.id)):this.findAnswerByBlockId(answers,block.id)},this.findBlockByType=function(blocks,blockType,profileType){return _.find(blocks,function(block){return U.isEmpty(profileType)?block.type===blockType&&block.type:block.type===blockType&&block.profileType===profileType})},this.findAnswerByBlockId=function(answers,blockId){return _.find(answers,function(answer){return angular.equals(answer.blockId,blockId)})},this.getPageBlocks=function(pages){var blocks=[];return angular.forEach(pages,function(page){angular.forEach(page.blocks,function(block){-1===block.type.indexOf("Content")&&blocks.push(block)})}),blocks}}]),angular.module("confRegistrationWebApp").service("U",function(){this.joiner=function(input,separator){return angular.isArray(input)?input.join(separator):input},this.getKeysWhere=function(object,value){return _.keys(_.pick(object,function(val){return val===value}))},this.isEmpty=function(value){return!(value||value===!1)},this.getValue=function(string,value){return this.isEmpty(string)?this.isEmpty(value)?"":value:string},this.stringifyArray=function(array,separator,string){if(this.isEmpty(string)&&(string=""),array.length<=0)return"";if(!angular.isArray(array[0]))return array.join(separator)+"\n";for(var i=0;i<array.length;i++)string+=this.stringifyArray(array[i],separator,string);return string},this.getDate=function(dateTime){var date=this.getValue(dateTime);return this.isEmpty(dateTime)||(date=new Date(dateTime)),date},this.sortArrayByIndex=function(array,index){array.sort(function(a,b){return a[index]<b[index]?-1:a[index]>b[index]?1:0})},this.submitForm=function(path,params,method){method=method||"post";var form=document.createElement("form");form.setAttribute("method",method),form.setAttribute("action",path),form.setAttribute("enctype","multipart/form-data");for(var key in params)if(params.hasOwnProperty(key)){var hiddenField=document.createElement("input");hiddenField.setAttribute("type","hidden"),hiddenField.setAttribute("name",key),hiddenField.setAttribute("value",params[key]),form.appendChild(hiddenField)}document.body.appendChild(form),form.submit()}});